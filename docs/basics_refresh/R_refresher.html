<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title> | STV4030A - R refresher</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../basics_refresh/Beyond_the_basics.html" rel="next">
<link href="..//pics/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><img src="../pics/uio-logo-white.png" class="img-fluid" width="150"> | STV4030A</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../basics_refresh/R_refresher.html">Working in R</a></li><li class="breadcrumb-item"><a href="../basics_refresh/R_refresher.html">R refresher</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.uio.no/oyvinsti/STV4030A">
            Source code
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.uio.no/oyvinsti/STV4030A/issues">
            Report an error
            </a>
          </li>
      </ul>
    </div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Working in R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_refresh/R_refresher.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">R refresher</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_refresh/Beyond_the_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Beyond the basics: functions and iteration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_refresh/Functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing your own functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_refresh/Iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Iteration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../basics_refresh/encoding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Locales and encoding</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Quarto documents</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Quarto_documents/writing_quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing Quarto documents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Quarto_documents/producing_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Producing Tables from R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wrangling/tidy_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidy Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wrangling/wrangling_in_dplyr_and_tidyr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wrangling in <code>dplyr</code> and <code>tidyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Data Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Visualization/data_viz_in_ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization in <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Visualization/data_viz_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Examples of different types of data visualizations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Visualization/data_viz_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualizing regression models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Visualization/data_viz_model_predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualizing quantities of interest based on regression models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Text data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text_data/text_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Political Text as Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text_data/read_texts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading Texts into R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text_data/regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regular expressions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text_data/extracting_data_from_texts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extracting data from texts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text_data/preprocessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preprocessing</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Data gathering</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data_gather/webscraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Webscraping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../data_gather/apis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">APIs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Spatial data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_data/what_is_spatial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is spatial data?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_data/reading_spatial_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reading spatial data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_data/spatial_joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial joins</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../spatial_data/basic_maps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Creating maps</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#installing-r-and-rstudio" id="toc-installing-r-and-rstudio" class="nav-link active" data-scroll-target="#installing-r-and-rstudio">Installing R and RStudio</a></li>
  <li><a href="#working-in-rstudio" id="toc-working-in-rstudio" class="nav-link" data-scroll-target="#working-in-rstudio">Working in RStudio</a>
  <ul class="collapse">
  <li><a href="#projects" id="toc-projects" class="nav-link" data-scroll-target="#projects">Projects</a></li>
  <li><a href="#directories-and-paths" id="toc-directories-and-paths" class="nav-link" data-scroll-target="#directories-and-paths">Directories and paths</a></li>
  <li><a href="#working-in-r-scriptsquarto-documents" id="toc-working-in-r-scriptsquarto-documents" class="nav-link" data-scroll-target="#working-in-r-scriptsquarto-documents">Working in R-scripts/Quarto documents</a></li>
  <li><a href="#the-console" id="toc-the-console" class="nav-link" data-scroll-target="#the-console">The console</a></li>
  <li><a href="#your-global-environment" id="toc-your-global-environment" class="nav-link" data-scroll-target="#your-global-environment">Your (global) environment</a></li>
  <li><a href="#commenting-your-code-and-organizing-your-script" id="toc-commenting-your-code-and-organizing-your-script" class="nav-link" data-scroll-target="#commenting-your-code-and-organizing-your-script">Commenting your code and organizing your script</a></li>
  </ul></li>
  <li><a href="#the-basics-of-r-programming" id="toc-the-basics-of-r-programming" class="nav-link" data-scroll-target="#the-basics-of-r-programming">The basics of R programming</a>
  <ul class="collapse">
  <li><a href="#r-as-a-calculator" id="toc-r-as-a-calculator" class="nav-link" data-scroll-target="#r-as-a-calculator">R as a calculator</a></li>
  <li><a href="#relational-operators-and-logical-conditions" id="toc-relational-operators-and-logical-conditions" class="nav-link" data-scroll-target="#relational-operators-and-logical-conditions">Relational operators and logical conditions</a></li>
  <li><a href="#logical-operators" id="toc-logical-operators" class="nav-link" data-scroll-target="#logical-operators">Logical operators</a></li>
  <li><a href="#sec-assigning" id="toc-sec-assigning" class="nav-link" data-scroll-target="#sec-assigning">Assigning values to objects</a></li>
  <li><a href="#do-operations-on-each-element-of-a-vector" id="toc-do-operations-on-each-element-of-a-vector" class="nav-link" data-scroll-target="#do-operations-on-each-element-of-a-vector">Do operations on each element of a vector:</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#installing-and-loading-packages" id="toc-installing-and-loading-packages" class="nav-link" data-scroll-target="#installing-and-loading-packages">Installing and Loading Packages</a></li>
  <li><a href="#sec-loading-data" id="toc-sec-loading-data" class="nav-link" data-scroll-target="#sec-loading-data">Loading Data</a>
  <ul class="collapse">
  <li><a href="#rds-files" id="toc-rds-files" class="nav-link" data-scroll-target="#rds-files"><code>.rds</code>-files</a></li>
  <li><a href="#csv-files" id="toc-csv-files" class="nav-link" data-scroll-target="#csv-files"><code>.csv</code>-files</a></li>
  <li><a href="#xlsx-files" id="toc-xlsx-files" class="nav-link" data-scroll-target="#xlsx-files"><code>.xlsx</code>-files</a></li>
  <li><a href="#dta-files" id="toc-dta-files" class="nav-link" data-scroll-target="#dta-files"><code>.dta</code>-files</a></li>
  <li><a href="#sav-files" id="toc-sav-files" class="nav-link" data-scroll-target="#sav-files"><code>.sav</code>-files</a></li>
  <li><a href="#rda-and-.rdata-files" id="toc-rda-and-.rdata-files" class="nav-link" data-scroll-target="#rda-and-.rdata-files"><code>.rda</code> and <code>.RData</code>-files</a></li>
  </ul></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data">Saving Data</a></li>
  <li><a href="#exploring-data.frames-and-other-r-objects" id="toc-exploring-data.frames-and-other-r-objects" class="nav-link" data-scroll-target="#exploring-data.frames-and-other-r-objects">Exploring <code>data.frame</code>s and other R objects</a>
  <ul class="collapse">
  <li><a href="#inspecting-the-variables-in-a-data.frame" id="toc-inspecting-the-variables-in-a-data.frame" class="nav-link" data-scroll-target="#inspecting-the-variables-in-a-data.frame">Inspecting the variables in a <code>data.frame</code></a></li>
  </ul></li>
  <li><a href="#changing-or-adding-variables" id="toc-changing-or-adding-variables" class="nav-link" data-scroll-target="#changing-or-adding-variables">Changing or adding variables</a></li>
  <li><a href="#sec-data-types" id="toc-sec-data-types" class="nav-link" data-scroll-target="#sec-data-types">Different data types</a>
  <ul class="collapse">
  <li><a href="#checking-which-type-a-variable-is" id="toc-checking-which-type-a-variable-is" class="nav-link" data-scroll-target="#checking-which-type-a-variable-is">Checking which type a variable is</a></li>
  <li><a href="#changing-the-data-type" id="toc-changing-the-data-type" class="nav-link" data-scroll-target="#changing-the-data-type">Changing the data type</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  </ul></li>
  <li><a href="#subsetting-data.frames-and-vectors" id="toc-subsetting-data.frames-and-vectors" class="nav-link" data-scroll-target="#subsetting-data.frames-and-vectors">Subsetting <code>data.frame</code>s and vectors</a></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">Lists</a></li>
  <li><a href="#checking-what-is-stored-inside-any-object" id="toc-checking-what-is-stored-inside-any-object" class="nav-link" data-scroll-target="#checking-what-is-stored-inside-any-object">Checking what is stored inside any object</a></li>
  </ul></li>
  <li><a href="#estimating-regression-models" id="toc-estimating-regression-models" class="nav-link" data-scroll-target="#estimating-regression-models">Estimating regression models</a>
  <ul class="collapse">
  <li><a href="#lm" id="toc-lm" class="nav-link" data-scroll-target="#lm"><code>lm()</code></a></li>
  <li><a href="#glm" id="toc-glm" class="nav-link" data-scroll-target="#glm"><code>glm()</code></a></li>
  <li><a href="#stan_glm" id="toc-stan_glm" class="nav-link" data-scroll-target="#stan_glm"><code>stan_glm()</code></a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R refresher</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This is a refresher on materials we expect you to be familiar with from your previous methods training.</p>
<p>If you feel comfortable working in R, you may skip this content (or parts of it that you find too easy) and <a href="https://pages.github.uio.no/oyvinsti/STV4030A/basics_refresh/Beyond_the_basics.html">move on to the more advanced topics</a>.</p>
<p>If your R skills are feeling a little rusty or you just want to make sure you are up to speed before progressing to the new topics, this is definitely the place to start!</p>
<section id="installing-r-and-rstudio" class="level1">
<h1>Installing R and RStudio</h1>
<p>First things first. You will need the following software installed in your computer:</p>
<ol type="1">
<li><p>A recent installation of R. <a href="https://cloud.r-project.org/">You can get the latest version of R here</a>.</p></li>
<li><p>The latest version of RStudio. <a href="https://posit.co/download/rstudio-desktop/">You can get the latest version of RStudio here</a>.</p></li>
</ol>
<p>If it has been a while since you last updated R and RStudio, it is a good idea to update both programs before proceeding. New versions of R are released quite regularly and it will be useful to ensure that your R installation is up-to-date.</p>
<p>Alternatively, <a href="https://www.uio.no/tjenester/it/utdanning/rstudioworkb/">you may use RStudio in your browser using the University of Oslo RStudio Workbench</a>. For the RStudio Workbench you will not need to install anything locally on your computer.</p>
</section>
<section id="working-in-rstudio" class="level1">
<h1>Working in RStudio</h1>
<p>Open RStudio. The window that opens should look something like this:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../pics/rstudio_startup.PNG" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="projects" class="level2">
<h2 class="anchored" data-anchor-id="projects">Projects</h2>
<p>Before we start working in R (e.g writing R scripts, saving output data, figures, tables, etc.), it is typically a good idea to start a new RStudio project. For instance, you may create a project called “STV4030A”, “DigitalData” or something similar if you would like to work in the same project throughout this course:</p>
<iframe src="https://uio.cloud.panopto.eu/Panopto/Pages/Embed.aspx?id=07b98ca6-bb9f-4ca9-9441-b0340085b638&amp;autoplay=false&amp;offerviewer=true&amp;showtitle=true&amp;showbrand=true&amp;captions=false&amp;interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen="" allow="autoplay">
</iframe>
<p>Alternatively, you could choose to create different projects for the five different assignments you will complete during this course. Once you are finished with this course and proceed to work on something else, e.g.&nbsp;your MA thesis (!), you would want to do so in a new project.</p>
<p>In either case, working in “RStudio projects” will allow you to keep track of the different files that belong to the project you are working on and to have a specific directory on the computer where those files will be saved. It will also enable you to easily switch between different projects that you may be working on simultaneously.</p>
</section>
<section id="directories-and-paths" class="level2">
<h2 class="anchored" data-anchor-id="directories-and-paths">Directories and paths</h2>
<p>Files on your computer are saved in different <em>directories</em>. You can find out which directory you are currently working in by running the following line of R code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above line will print the <em>path</em> to the location you are currently working in. If you created a project and are working in that project, it should be the path to the directory where your project lives.</p>
<p>We may want to store different types of files in different subdirectories. For instance, you may create a new folder called “Data” where you will save your datasets and another folder called “Figures” where you will save all the figures you create with R. Having such subdirectories is a good idea! However, it means you will need to keep track of the correct path to the folder when you load/save files from/to those folders. If our project working directory has a folder called “Data” which contains a dataset called “example_data.RData”, the code for loading the dataset would be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"Data/example_data.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If, “example_data.RData” had been saved in the working directly (i.e.&nbsp;not in a subdirectory), the code would have been</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"example_data.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you are not working in an RStudio project, you will need to set the working directory manually using <code>setwd()</code>. You will need to specify the directory you would like to work in. For instance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/oyvinsti/OneDrive - Universitetet i Oslo/Documents/STV4030A"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you don’t set the working directory. You will end up working in the default directory. We don’t recommend working in the default directory as it will likely end up being very messy!</p>
<p>If you want to load data from or save output to some directory that is not subdirectory of your working directory, you may do so by writing out the full path. For instance, the following line will load “example_data.RData” from the specified directory no matter what working directory you are currently working in (assuming that the specified directory and file exist on your computer):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"C:/Users/oyvinsti/OneDrive - Universitetet i Oslo/Documents/STV4030A/Data/example_data.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Avoiding such long (and computer-specific) paths is yet another reason to do all your work in RStudio projects!</p>
</section>
<section id="working-in-r-scriptsquarto-documents" class="level2">
<h2 class="anchored" data-anchor-id="working-in-r-scriptsquarto-documents">Working in R-scripts/Quarto documents</h2>
<p>You should be writing your code in R-scripts (or in Quarto-documents <a href="https://pages.github.uio.no/oyvinsti/STV4030A/Quarto_documents/writing_quarto.html">(which we will introduce later)</a>). You can open a new script by clicking “New file” and then selecting “R script”:</p>
<iframe src="https://uio.cloud.panopto.eu/Panopto/Pages/Embed.aspx?id=b63c5df3-7c10-4ba4-8d89-b034008afa22&amp;autoplay=false&amp;offerviewer=true&amp;showtitle=true&amp;showbrand=true&amp;captions=false&amp;interactivity=all" height="405" width="720" style="border: 1px solid #464646;" allowfullscreen="" allow="autoplay">
</iframe>
<p>Writing R scripts (or Quarto documents) helps making your work organized and reproducable. To this end, make sure that the code is written in the right sequence: a line of code may depend on code that is above it in the script (but not on code that comes below it).</p>
<p>Think of your script as the recipe for re-creating your analysis. Just as when cooking, the order in which you do things may matter.</p>
<p>Save your R script with an informative name and <code>.R</code> at the end of the file name. The informative file name will help you remember what the script does and the <code>.R</code> will help your computer know that your file is an R script.</p>
<p>When working on your script, you may execute an individual line of code by placing the cursor anywhere on that line and pressing <code>Ctrl+Enter</code> on a PC or <code>Cmd+Enter</code> on a Mac. Executing lines of code line-by-line is great for working interactively in RStudio.</p>
<p>You may also run the entire script or some part of it by highlighting everything/what you would like to run, before pressing <code>Ctrl+Enter</code>/<code>Cmd+Enter</code>. You can also run the entire script by pressing <code>Ctrl+Alt+Enter</code>/<code>Cmd+Alt+Enter</code>.</p>
<p>Alternatively if you have the script saved as a <code>.R</code>-file on your computer, you may run it using the <code>source()</code> function in R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"hello_world.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Your complete scripts should run without errors when you open them in a fresh RStudio session and press <code>Ctrl+Alt+Enter</code>/<code>Cmd+Alt+Enter</code>. For your scripts to run without error, you will need to make sure that the code is written in the correct sequence, that all the packages you use are installed on your computer and loaded in the script, that you load data from the right directories, and that any code that doesn’t run is edited/commented out (we will explain what <em>commenting out</em> something means in a moment).</p>
</section>
<section id="the-console" class="level2">
<h2 class="anchored" data-anchor-id="the-console">The console</h2>
<p>When you run/execute the code, the code and the results will be printed in the “console” (by default located in the lower left corner in the RStudio window). It is also possible to write the code directly in the console (this may be a good idea for instance for installing packages), but you shouldn’t write the code for anything you later would want to reproduce in the console. Write your code in R-scripts or Quarto documents, so that you can reproduce your work later!</p>
<p><img src="../pics/script_console.png" class="img-fluid"></p>
</section>
<section id="your-global-environment" class="level2">
<h2 class="anchored" data-anchor-id="your-global-environment">Your (global) environment</h2>
<p>The pane called “Environment” (by default located in the upper-right corner of RStudio), lists all the objects currently stored in your global environment. We will talk about such objects later (they might be datasets, individual vectors, regression models, or whatever). You can store something in the environment by using the assignment operator. For instance, we can store the text string “hello world!” in an object called <code>message</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>message <span class="ot">&lt;-</span> <span class="st">"hello world"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the console we will then only see an <em>echo</em> of this code (it doesn’t print any output) and an object called message will appear in the environment pane.</p>
<p><img src="../pics/environment.PNG" class="img-fluid"></p>
<p>The object is listed under values as it is a character vector. We can also see a preview of what the vector contains. Since our vector only has a single value (“hello world!”), the preview just displays this value.</p>
<p>You can print out a list of everything stored in your global environment using the <code>ls()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "has_annotations" "message"        </code></pre>
</div>
</div>
<p>Storing “hello world!” in the object <code>message</code> has the advantage that we can now refer to the object name in our subsequent code (rather than retyping the value(s) each time we want to do something with out message), so we can:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(message)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
<p>or perhaps we would rather:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">toupper</span>(message))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HELLO WORLD"</code></pre>
</div>
</div>
<p>All the objects in your global environment should be created from your script and in the sequence in which you will be needing them (so don’t create new objects from the console!). This ensures the reproducability of your work. Whenever you close and reopen RStudio, you can just rerun your script to reproduce your objects.</p>
<p>It is possible to save everything in the current environment like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">"environment_containing_hello_world_message.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When exiting RStudio, you will be asked whether you want to save what is in your environment (unless you turn this feature off in the RStudio settings).</p>
<p>It is usually better to <strong>not save</strong> what is in your environment and instead re-run your script which should reproduce the all the objects to the environment when you close and reopen RStudio.</p>
<p>To make sure that their scripts are not affected by whatever is already in the global environment, some people like to start their R scripts with the following line, which will remove everything from the global environment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While the above line removes all objects from the global environment. The code you run may, however, still be affected by what you have previously done while working in the same R session, for instance, by packages you have loaded. It is therefore usually better to close and reopen RStudio (without saving what is in the environment) whenever you want to rerun your code in a fresh session.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Global vs.&nbsp;local environment
</div>
</div>
<div class="callout-body-container callout-body">
<p>So far, we have only dealt with the <em>global</em> environment. This might make you wonder if there are also <em>local</em> environments. There are, but these are not so important just yet. We will get back to local environments, when we start <a href="../basics_refresh/Beyond_the_basics.html">defining our own functions</a>.</p>
</div>
</div>
</section>
<section id="commenting-your-code-and-organizing-your-script" class="level2">
<h2 class="anchored" data-anchor-id="commenting-your-code-and-organizing-your-script">Commenting your code and organizing your script</h2>
<p>It is useful to add <em>comments</em> in your script to explain your code. Such comments make it easier both for others and for your future self to understand what your code does.</p>
<p>You can add comments using the hashtag (<code>#</code>) symbol. Everything that follows the hashtag will be ignored when the code is executed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>message <span class="ot">&lt;-</span> <span class="st">"hello world"</span> <span class="co"># This line assigns the string "hello world" to an object called "message"</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(message) <span class="co"># This line prints out whatever is stored in the object called "message"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
<p>As your scripts grow long, it may be a good idea to organize them in different sections with headers. Comments are useful also for this purpose. You make a header using four hashtags on each side of the text of your header:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### This code just prints out the hello world message ####</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>message <span class="ot">&lt;-</span> <span class="st">"hello world"</span> <span class="co"># This line assigns the string "hello world" to an object called message</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(message) <span class="co"># This line prints out whatever is stored in the object called message</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
<p>Alternatively, you can include a single hashtag, followed by a label and some dashes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This is another way of making a header--------</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>message <span class="ot">&lt;-</span> <span class="st">"hello world"</span> <span class="co"># This line assigns the string "hello world" to an object called message</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(message) <span class="co"># This line prints out whatever is stored in the object called message</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello world"</code></pre>
</div>
</div>
<p>Finally, comments can be useful when you have code that doesn’t run (and therefore produces errors when you run your script) but that you don’t want to delete just yet (you are still working on it! Or maybe you just find it hard to let go…). In such cases, <em>commenting out</em> the code is useful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>new_message <span class="ot">&lt;-</span> <span class="st">"you can also print other messages"</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#print(new_massage) this code doesn't run, but I don't know why. Must be a typo or something... I will have another look at it tomorrow</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-basics-of-r-programming" class="level1">
<h1>The basics of R programming</h1>
<p>Now that we have installed R and Rstudio and repeated the basics of how to organize our work in RStudio, it is time to repeat the basics of R programming.</p>
<section id="r-as-a-calculator" class="level2">
<h2 class="anchored" data-anchor-id="r-as-a-calculator">R as a calculator</h2>
<p>An easy way to get started in R is to try using it as a calculator. Try doing some simple calculations such as:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span><span class="sc">+</span><span class="dv">65</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 79</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dv">78</span><span class="sc">*</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 390</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span><span class="sc">/</span>(<span class="dv">6-1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">^-</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0009765625</code></pre>
</div>
</div>
<p>When executing the code above, the result of each calculation will be printed in the console, but not stored anywhere. If you want to store the results, you will need to <a href="#sec-assigning">assign them to objects</a>.</p>
</section>
<section id="relational-operators-and-logical-conditions" class="level2">
<h2 class="anchored" data-anchor-id="relational-operators-and-logical-conditions">Relational operators and logical conditions</h2>
<p>We can use relational operators to make R evaluate logical conditions (i.e.&nbsp;statements that are either <code>TRUE</code> or <code>FALSE</code>). For instance, we can ask if 14 is greater than 5:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">&gt;</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Because 14 is in fact greater than 5, R will return the value <code>TRUE</code>.</p>
<p>If we ask whether 14 is equal to 5, R will return <code>FALSE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">==</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>However, if we ask if whether 14 is greater or equal to 5, the result will be <code>TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">&gt;=</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>If we ask if 14 is <em>not equal</em> to 5, the result will be <code>TRUE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">!=</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>If we ask if 14 is smaller than 5, the result will be <code>FALSE</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">&lt;</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>We can ask whether 5 is the sequence of integers from 1 to 14, which it is so the result will be <code>TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Using such logical conditions will be incredibly useful for instance when we want to recode variables, subset our dataset to only contain observations that satisfy specific conditions, etc.</p>
</section>
<section id="logical-operators" class="level2">
<h2 class="anchored" data-anchor-id="logical-operators">Logical operators</h2>
<p>The logical operators AND (<code>&amp;</code>) and OR (<code>|</code>) are often useful, in particular to write more complex logical conditions. We may for instance ask if 14 is greater than 5 AND 5 is smaller than 2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> <span class="dv">5</span> <span class="sc">&lt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>The above code evaluates to <code>FALSE</code> because only one of the two statements are true.</p>
<p>If we instead ask whether 14 is greater than 5 OR 5 is smaller than 2, we get that this is true because one of the statements is true:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">|</span> <span class="dv">5</span> <span class="sc">&lt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="sec-assigning" class="level2">
<h2 class="anchored" data-anchor-id="sec-assigning">Assigning values to objects</h2>
<p>As we have already seen, we may store values in objects. To <em>assign</em> something to an object, we use the <em>assignment operator</em>, <code>&lt;-</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">15</span><span class="sc">/</span>(<span class="dv">6-1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Running the above line, will print an echo of the code in the console, but not the result of the calculation. Instead, an object called <code>a</code> containing the result will be saved in our environment. You may print out the value using <code>print()</code> or use it in new calculations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a) <span class="co">#printing whatever is stored in a to the console. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>a<span class="sc">+</span><span class="dv">5</span> <span class="co">#adding 5 to whatever is stored in a. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>The object “a” is a vector containing only a single element. If we want to create longer vectors with multiple elements we can use the <code>c()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span><span class="sc">+</span><span class="dv">65</span>, <span class="dv">78</span><span class="sc">*</span><span class="dv">5</span>, <span class="dv">15</span><span class="sc">/</span>(<span class="dv">6-1</span>), <span class="dv">2</span><span class="sc">^-</span><span class="dv">10</span>) <span class="co"># storing the results of various calculations in the vector called "results"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Object names
</div>
</div>
<div class="callout-body-container callout-body">
<p>Object names in R must start with a letter and may only include letters, numbers, underscores (<code>_</code>) and periods (<code>.</code>). Letters may be upper and lower case (and R distinguishes between lower and upper case, so if you really want to, you may have multiple objects called “results”, “Results”, “RESULTS”, etc. We don’t recommend this as it may be hard for you to remember the differences between objects called very similar things).</p>
<p>It is useful to have informative object names that describe what is contained in the object. We recommend the <em>snake_case</em> convention for combining multiple words in a object name. This simply means using lowercase letters and separating different words with <code>_</code>. For instance, you you may name a regression model something like <code>linear_regression_with_all_controls</code>.</p>
<p>There, however, also other conventions, such as <em>camelCase</em> in which you you capitalize the first letter of each word. If you prefer this style, you could name your regression model something like <code>linearRegressionWithAllControls</code>.</p>
</div>
</div>
</section>
<section id="do-operations-on-each-element-of-a-vector" class="level2">
<h2 class="anchored" data-anchor-id="do-operations-on-each-element-of-a-vector">Do operations on each element of a vector:</h2>
<p>We can do operations on all elements of a vector at the same time. For instance, the following line of code, will add 1 to all elements in the vector results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>results <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  80.000000 391.000000   4.000000   1.000977</code></pre>
</div>
</div>
<p>Notice that because we didn’t assign the output of the above code to an object, the results are just printed out in the console. If we instead run the code</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> results <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>we will overwrite the object “results” with the new vector in which 1 is added to each element.</p>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>When we are working in R, we are constantly using different functions. For instance, we have already used the function <code>print()</code> to print values to the console. Functions take some input (given in the form of arguments that the function accepts), perform some operation(s), and then returns some output.</p>
<p>Functions have a name followed by a parenthesis. Inside the parenthesis, we can specify one or more arguments. Based on the values on these arguments, the function will produce some result. For instance the function <code>mean()</code> calculates the arithmetic mean (or <em>the average</em>) value of a vector. Let’s try it out:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>some_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">66</span>, <span class="dv">8</span>, <span class="dv">800</span>) <span class="co"># just creating a vector containing some numbers</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="at">x =</span> some_numbers) <span class="co"># taking the mean of the vector some_numbers</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 178.4</code></pre>
</div>
</div>
<p>We have used the function <code>mean()</code>, which takes the argument <code>x</code> and calculates the mean of <code>x</code>. When <em>calling the function</em> we specified that we want the argument <code>x</code> to take the value <code>some_numbers</code>. Since x is the first argument of <code>mean()</code> we could skip the <code>x =</code> part of the function call. The following code will produce exactly the same result:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(some_numbers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 178.4</code></pre>
</div>
</div>
<p>The function <code>mean()</code> also takes two other arguments. The first of these is <code>trim</code>, which specifies “the fraction (0 to 0.5) of observations to be trimmed from each end of x before the mean is computed.” <code>trim</code> defaults to 0, meaning that we take the mean of the entire vector <code>x</code>. We can however, set it to something else, such as 0.2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(some_numbers, <span class="at">trim =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 29.66667</code></pre>
</div>
</div>
<p>We now removed 20 per cent of the values on each end of the some_numbers before calculating the mean. We will very rarely have use of the <code>trim</code> argument (in fact, Øyvind used this argument for the first time in his life when writing this page!).</p>
<p>The second additional argument of the function <code>mean()</code> will, however, often prove useful! <code>na.rm</code> takes a “logical evaluating to <code>TRUE</code> or <code>FALSE</code> indicating whether <code>NA</code> values should be stripped before the computation proceeds”. In other words, this argument specifies whether missing values should be removed before we calculate the mean. If the vector we calculate the mean of contains missing values and we don’t set <code>na.rm = TRUE</code> our output will just be <code>NA</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>some_numbers_with_missing <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">3</span>,<span class="cn">NA</span>, <span class="dv">66</span>, <span class="dv">8</span>, <span class="dv">800</span>) <span class="do">## just creating a vector containing some numbers</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(some_numbers_with_missing) <span class="do">## this will result in NA as na.rm defaults to FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(some_numbers_with_missing, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 178.4</code></pre>
</div>
</div>
<p>We are using functions in R all the time and not just to do mathematical operations such as taking the mean. We use functions to load datasets, fit regression models, export outputs, make graphs, or scrape data from the web. Understanding functions is thus key to mastering R!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Read the documentation!
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you wonder exactly what a function does, what arguments it takes, and what it produces, it is very useful to look at the documentation. You can find the documentation either by running <code>?function_name</code> or by typing <code>help(topic = function_name)</code>. For instance, if we want to look up the documentation for the function <code>mean()</code>, we would run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>?mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or alternatively:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">topic =</span> mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The help page containing the documentation for the function should then show up in the “help” pane in RStudio (by default locating in the lower-right corner).</p>
</div>
</div>
</section>
<section id="installing-and-loading-packages" class="level2">
<h2 class="anchored" data-anchor-id="installing-and-loading-packages">Installing and Loading Packages</h2>
<p>When you open a new R session, you immediately have access to some functions, such as <code>mean()</code> or <code>print()</code>, which we have already used. These functions included in “base R” are quite powerful and may suffice for many purposes. However, we can vastly extend the capabilities of R by making use of the thousands of <em>packages</em>, which contains additional functions (and sometimes data).</p>
<p>Some of these packages are distributed with R, meaning that they are automatically installed when you install R (but are still not automatically loaded when you start a new R session). One example is the <code>survival</code> package, which contains functions for something called <a href="https://academic.oup.com/edited-volume/28340/chapter/215161682?login=true">“event history” or “survival” analysis</a> (which we will not really get into in this course). Before we can use the functions included in such packages, we will need to load them. We load packages using the <code>library()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival) <span class="co"># this loads the survival package. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Other packages are not distributed with R and need to be downloaded from the internet and installed on your computer before we can use them. One example is the <code>haven</code> package (<a href="#sec-loading-data">which we will be using shortly</a>). We can download and install (most) packages using the <code>install.packages()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"haven"</span>) <span class="co"># this will install the haven package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Don’t reinstall packages every time you run your code!
</div>
</div>
<div class="callout-body-container callout-body">
<p>You only need to install a package once (that is, at least until you update R and may need to also update your packages). You therefore don’t want to include the calls to <code>install.packages()</code> in your scripts! Including these calls in your scripts will make R reinstall the packages every time you run the script, both slowing down the script and likely causing problems that occur when you try to reinstall packages that are already loaded. It is good practice to install the packages directly in the console, delete the lines installing packages once the packages are installed, or commenting out the lines that install packages if you insist on keeping the code for later use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("haven") # I commented out this line, because haven is already installed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Installing the package is not sufficient, we also need to load it. Once the package is installed on our computer, we can load it using the <code>library()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven) <span class="co"># this loads the haven package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While we only need to install the packages once, we need to load them every time we want to use them in a new R session. It is useful to load all the packages you are using at the beginning of your scripts. This allows you to discover problems (for instance that a package is not installed) already when you run the first lines of the script later. You may then have a first section of the script that looks something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Loading packages that I will be using ####</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven) </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Functions from different packages that share the same name!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Anyone can develop and publish R packages with new functions. While this is generally a great thing, it also means that there will be many functions from different packages that share the same names. Some function names, such as <code>select()</code>, may be very tempting for developers to use and there will therefore be many functions with names such as <code>select()</code>. If you load different packages that contain functions named <code>select()</code>, you may accidentally be using a different function than you intended to!</p>
<p>There are (at least) two ways of dealing with this problem. First, you can write <code>package_name::function_name</code> to specify which package the function is from. So, if you want to use the function <code>select()</code> from the package <code>dplyr</code>, you write <code>dplyr::select()</code>. This approach is fine if you are only invoking this function once, but it can get a bit tedious if you are repeatedly using <code>select()</code> from <code>dplyr</code>.</p>
<p>A second approach is to use the package <code>conflicted</code> to specify how conflicts between different packages should be resolved. This code will tell R that it should always use <code>select()</code> from <code>dplyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="at">name =</span> <span class="st">"select"</span>, <span class="at">winner =</span> <span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>[conflicted] Will prefer dplyr::select over any other package.</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Different package repositories
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most of the packages you will be installing from the internet are available from a package repository called “The Comprehensive R Archive Network”( CRAN). These packages can simply be installed without specifying any other arguments than the package name when running <code>install.packages()</code> as the default behavior of this function is to install packages from CRAN.</p>
<p>Occasionally, packages may be available only through other repositories. In such cases, we will need to specify the “repos” argument. One example is the package <code>countreg</code> which is only available through a repository called R-Forge. We therefore need to install this package like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"countreg"</span>, <span class="at">repos =</span> <span class="st">"http://R-Forge.R-project.org"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Other packages will only be available as development versions, for instance through GitHub. One example is the <a href="https://github.com/vdeminstitute/vdemdata"><code>vdemdata</code> package</a> which contains the most recent version of the <a href="https://v-dem.net/">Varieties of Democracy dataset</a>. To install packages available from GitHub you will need to first install the <code>devtools</code> package (which is available from CRAN!). Note that to install <code>devtools</code> on Windows, you will also need something called <a href="https://cran.r-project.org/bin/windows/Rtools/">RTools installed on your system</a> To install <code>devtools</code> on Mac, you will similarly need something called <a href="https://apps.apple.com/us/app/xcode/id497799835?mt=12">Xcode</a> or <a href="https://www.xquartz.org/">XQuartz</a>.</p>
<p>You can install the <code>vdemdata</code> package from GitHub like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("devtools") # if you haven't already installed devtools, you will need to run this line</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install_github</span>(<span class="st">"vdeminstitute/vdemdata"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="sec-loading-data" class="level2">
<h2 class="anchored" data-anchor-id="sec-loading-data">Loading Data</h2>
<p>Now that we know how to use R functions, assign values to objects, and install and load packages, we are ready to start loading datasets into R (and thus also making the political science relevance of what we are up to more obvious!).</p>
<p>We will load the WhoGov dataset which provides “bibliographic information, such as gender and party affiliation, on cabinet members in July every year in the period 1966-2021 in all countries with a population of more than 400,000 citizens”. <a href="https://doi.org/10.1017/S0003055420000490">You can read more about this dataset and get some ideas for what such data can be used for here!</a>. We downloaded the data from <a href="https://politicscentre.nuffield.ox.ac.uk/whogov-dataset/" class="uri">https://politicscentre.nuffield.ox.ac.uk/whogov-dataset/</a> and saved local copies, which you may also want to do if you would like to test the code below.</p>
<p>How we will load the data depends on the format (the type of file). You know what type of file it is by looking at the end of the file name (whether it ends in <code>.csv</code>, <code>.rds</code>, or something else).</p>
<section id="rds-files" class="level3">
<h3 class="anchored" data-anchor-id="rds-files"><code>.rds</code>-files</h3>
<p>One of the formats that the WhoGov dataset is supplied in is <code>.rds</code>. We can load <code>.rds</code>-files using the <code>read_rds()</code> function from the package <code>readr</code>. The <code>read_rds()</code> takes the argument <code>file</code> which we use to specify the location of the file on our computer:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.0.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Because <code>file</code> is the first argument, we don’t have to name it in the function call, so we could also run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"../data/WhoGov_within_V2.0.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The nice WhoGov people have also made the file available as a comma-separated values files (<code>.csv</code>). This is a very nice format to work with. <code>.csv</code>-files are just plain text files in which different columns are separated by commas. You can load <code>.csv</code>-file using the <code>read_delim()</code> function from the <code>readr</code> package (Since we already loaded this packages, we don’t need to reload it):</p>
</section>
<section id="csv-files" class="level3">
<h3 class="anchored" data-anchor-id="csv-files"><code>.csv</code>-files</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.0.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 249957 Columns: 32
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (20): country_isocode, country_name, position, name, title, gender, dead...
dbl (12): ...1, year, id, birthyear, partyfacts_id, core, minister, leader, ...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>In addition to the <code>file</code> argument, we also specified the <code>delim</code> argument which tells R how the columns are separated in the file. When columns are separated using <code>,</code>, we could also use <code>read_csv()</code> which works in exactly the same way as <code>read_delim()</code> except that it will assume that the delimiter is a comma:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.0.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 249957 Columns: 32
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (20): country_isocode, country_name, position, name, title, gender, dead...
dbl (12): ...1, year, id, birthyear, partyfacts_id, core, minister, leader, ...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>The delimiter is, however, not always a comma. Sometimes people use a semicolon or the tabulator to separate the columns. Using <code>read_delim()</code> and specifying the delimiter is useful in such cases. <code>read_delim()</code> also has a number of other arguments you can specify. For instance, you can specify whether white space at the beginning and end of each cell should be removed (<code>trim_ws</code>), whether the first row of the dataset contains variable names (<code>col_names</code>), or whether R should skip some lines in the file when loading it (<code>skip</code>). These arguments have default options that will work well for most dataset, but if you run into trouble loading a <code>.csv</code>-file, it is a good idea to check out these options. You can see the full list options by looking up the documentation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>?read_delim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By default, <code>read_delim()</code> spits out some information about the variables included in the dataset and whether they are read as numbers or as character strings (<a href="@sec-data-types">we will discuss data types later</a>). If you find this behavior annoying, you can turn it off using the <code>show_col_types</code> argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.0.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="xlsx-files" class="level3">
<h3 class="anchored" data-anchor-id="xlsx-files"><code>.xlsx</code>-files</h3>
<p>Finally, WhoGov is made available in Microsoft Excel (<code>xlsx</code>) format. To load a <code>.xlsx</code>-file, you can use the <code>read_excel()</code> function from the <code>readxl</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.0.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sometimes Excel-files will contain data in different sheets. The <code>read_excel()</code> function has a <code>sheet</code> argument which allows you to specify which sheet you are interested in.</p>
</section>
<section id="dta-files" class="level3">
<h3 class="anchored" data-anchor-id="dta-files"><code>.dta</code>-files</h3>
<p>You will frequently encounter datasets saved in the Stata dataset format (<code>.dta</code>). While WhoGov is not published in this format, we have saved it locally as a <code>.dta</code>-file to illustrate how such files can be loaded.</p>
<p>We can load <code>.dta</code>-files using the <code>read_dta()</code> function from the <code>haven</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"../data/WhoGov_within_V2.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sav-files" class="level3">
<h3 class="anchored" data-anchor-id="sav-files"><code>.sav</code>-files</h3>
<p>Similarly, we can load SPSS (<code>.sav</code>) files using the <code>read_sav()</code> function which is also available from the <code>haven</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">"../data/WhoGov_within_V2.sav"</span>, <span class="at">encoding =</span> <span class="st">"latin1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To load the SPSS version of the file, we had to specify correct <a href="https://en.wikipedia.org/wiki/Character_encoding">encoding</a>. The “encoding” is just how variables containing text is stored in the file. If you encounter error messages like this one: “Unable to convert string to the requested encoding (invalid byte sequence)”, the problem is typically that R doesn’t recognize the encoding of the file and that you therefore need to specify it. <a href="https://pages.github.uio.no/oyvinsti/STV4030A/basics_refresh/encoding.html">We discuss encoding in more detail here</a>.</p>
</section>
<section id="rda-and-.rdata-files" class="level3">
<h3 class="anchored" data-anchor-id="rda-and-.rdata-files"><code>.rda</code> and <code>.RData</code>-files</h3>
<p><code>.rda</code> and <code>.RData</code> are R data formats. You can load <code>.rda</code>- and <code>.RData</code>- files using the function <code>load()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"../data/WhoGov_within_V2.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="saving-data" class="level2">
<h2 class="anchored" data-anchor-id="saving-data">Saving Data</h2>
<p>You may save your data in any of the formats we encountered above (as well as many others). However, we will recommend saving your data either as plain text <code>.csv</code>-files or as R datasets (<code>.rda</code> or <code>.RData</code>).</p>
<p>To save a dataset as a <code>.csv</code>-file, we can use the function <code>write_csv()</code> from the package <code>readr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="at">x =</span> who_gov, <span class="at">file =</span> <span class="st">"../data/who_gov_copy.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When saving datasets, we both need to specify the data frame that we would like to save (using the <code>x</code> argument) and the file name (and directory) we want to save the data to (using the <code>file</code> argument).</p>
<p>To save a dataset as an R dataset, we can use the <code>save()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(who_gov, <span class="at">file =</span> <span class="st">"../data/who_gov_copy.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can save multiple objects at the same time using <code>save()</code> and these objects don’t necessarily have to be <code>data.frame</code>s. <a href="https://pages.github.uio.no/oyvinsti/STV4030A/basics_refresh/R_refresher.html#sec-assigning">We created some other objects above</a>, such as the vectors <code>a</code> and <code>results</code>. We can save them in <code>.rda</code>-file together with the <code>who_gov</code> <code>data.frame</code> if we want to:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(who_gov,a, results, <span class="at">file =</span> <span class="st">"../data/who_gov_copy_and_other_stuff.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we then <code>load()</code> this file, we will load all these three objects to our environment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">"../data/who_gov_copy_and_other_stuff.rda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Saving data in other formats
</div>
</div>
<div class="callout-body-container callout-body">
<p>Functions for saving data to other formats are generally available in the same packages as the functions for loading data. Their function names typically start with <code>write_</code> followed by the format. To save a dataset as a Stata (<code>.dta</code>) file, you may for instance use <code>write_dta()</code> from <code>haven</code>.</p>
</div>
</div>
</section>
<section id="exploring-data.frames-and-other-r-objects" class="level2">
<h2 class="anchored" data-anchor-id="exploring-data.frames-and-other-r-objects">Exploring <code>data.frame</code>s and other R objects</h2>
<p>The WhoGov data was loaded to R as a <code>data.frame</code> and we assigned it to the object we called <code>who_gov</code>. You will see that <code>who_gov</code> stored under the header “Data” in the Environment pane.</p>
<p><img src="../pics/environment_with_data_frame.PNG" class="img-fluid" width="822"></p>
<p>We generally want to store our datasets as <code>data.frame</code>s (or as <code>tibble</code>s. The <code>tibble</code> format is just a somewhat modernized version of the traditional R <code>data.frame</code>). <code>data.frame</code>s should be organized with the observations (our units of analysis) as rows and variables as columns. We can get a quick glimpse of what the dataset looks like by printing out the first six rows in the console using the function <code>head()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  year country_isocode country_name id            position
1 1966             AFG  Afghanistan  1                King
2 1966             AFG  Afghanistan  2          Prime Min.
3 1966             AFG  Afghanistan  3 1st Dep. Prime Min.
4 1966             AFG  Afghanistan  4 2nd Dep. Prime Min.
5 1966             AFG  Afghanistan  5 Min. Of Agriculture
6 1966             AFG  Afghanistan  6    Min. Of Commerce
                        name title gender birthyear deadyear       party
1             Mohammed Zahir  &lt;NA&gt;   Male        NA     &lt;NA&gt; independent
2 Maiwandwal Mohammed Hashim  &lt;NA&gt;   Male        NA     &lt;NA&gt;        pdpa
3          Nur Ahmed Etemadi  &lt;NA&gt;   Male        NA     &lt;NA&gt; independent
4       Shalizi Abdus Sattar  &lt;NA&gt;   Male        NA     &lt;NA&gt; independent
5        Mohammed Akbar Reza  &lt;NA&gt;   Male        NA     &lt;NA&gt;     unknown
6                    Ali Nur   Dr.   Male        NA     &lt;NA&gt;     unknown
                                party_english party_otherlanguage
1                                 independent         independent
2 Progressive Democratic Party of Afghanistan                &lt;NA&gt;
3                                 independent         independent
4                                 independent         independent
5                                        &lt;NA&gt;                &lt;NA&gt;
6                                        &lt;NA&gt;                &lt;NA&gt;
   whogov_partyid partyfacts_id core minister leader        classification
1 AFG-independent          4908    1        0      0  Member, Royal Family
2        AFG-pdpa          8700    1        0      1        Prime Minister
3 AFG-independent          4908    1        0      0 Deputy Prime Minister
4 AFG-independent          4908    1        0      0 Deputy Prime Minister
5     AFG-unknown            NA    1        1      0  Minister (Full Rank)
6     AFG-unknown            NA    1        1      0  Minister (Full Rank)
                               portfolio_1 prestige_1 portfolio_2 prestige_2
1                                     &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;
2                                     &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;
3                                     &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;
4                                     &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;
5 Agriculture, Food, Fisheries &amp; Livestock     Medium        &lt;NA&gt;       &lt;NA&gt;
6                      Industry &amp; Commerce     Medium        &lt;NA&gt;       &lt;NA&gt;
  portfolio_3 prestige_3 portfolio_4 prestige_4 m_finance m_defense
1        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
2        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
3        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
4        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
5        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
6        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;         0         0
  m_agriculture m_foreignaffairs
1             0                0
2             0                0
3             0                0
4             0                0
5             1                0
6             0                0</code></pre>
</div>
</div>
<p>What is the unit-of-analysis in the <code>who_gov</code> dataset? Well, we see that the first six rows all cover the country Afghanistan and the year 1966. So, clearly, we are not dealing with a country-year dataset (if so, we would only have one row per country per year). The different observations from the same country-year appear to be different people holding different cabinet positions, so maybe the unit of analysis is the “country-year-position”.</p>
<p>Since we are not sure, we should look up the documentation for the article. <span class="citation" data-cites="nyrup2020governs">Nyrup and Bramwell (<a href="#ref-nyrup2020governs" role="doc-biblioref">2020</a>)</span> write that the dataset “contains yearly data on members of cabinets in 177 countries”, so our impression that the unit of analysis is the country-year-position appears to be correct.</p>
<p>A few other functions are useful for getting a quick overview of how a specific <code>data.frame</code> is structured. First, <code>names()</code> will print out the names of all the variables in the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "year"                "country_isocode"     "country_name"       
 [4] "id"                  "position"            "name"               
 [7] "title"               "gender"              "birthyear"          
[10] "deadyear"            "party"               "party_english"      
[13] "party_otherlanguage" "whogov_partyid"      "partyfacts_id"      
[16] "core"                "minister"            "leader"             
[19] "classification"      "portfolio_1"         "prestige_1"         
[22] "portfolio_2"         "prestige_2"          "portfolio_3"        
[25] "prestige_3"          "portfolio_4"         "prestige_4"         
[28] "m_finance"           "m_defense"           "m_agriculture"      
[31] "m_foreignaffairs"   </code></pre>
</div>
</div>
<p>To know what these different variables are and how they are coded, we have to look up the codebook or other documentation. This information is not generally available in R. <a href="https://static.cambridge.org/content/id/urn:cambridge.org:id:article:S0003055420000490/resource/name/S0003055420000490sup001.pdf">The codebook for the WhoGov dataset is available online.</a></p>
<p>Second, we can use <code>dim()</code> to get the dimensions of the <code>data.frame</code>: the number of rows and columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 249957     31</code></pre>
</div>
</div>
<p>We can see that there are 249957 rows (the observations) and 31 columns (the variables). If we prefer, we could also get this information separately using the <code>nrow()</code> and <code>ncol()</code> functions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(who_gov) <span class="co"># the number of rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 249957</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(who_gov) <span class="co"># the number of columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
</div>
<p>Third, we can use <code>summary()</code> to get summary statistics for all the variables in the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      year      country_isocode    country_name             id      
 Min.   :1963   Length:249957      Length:249957      Min.   :   1  
 1st Qu.:1984   Class :character   Class :character   1st Qu.: 354  
 Median :1998   Mode  :character   Mode  :character   Median : 722  
 Mean   :1996                                         Mean   : 817  
 3rd Qu.:2010                                         3rd Qu.:1167  
 Max.   :2021                                         Max.   :3564  
                                                                    
   position             name              title              gender         
 Length:249957      Length:249957      Length:249957      Length:249957     
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
   birthyear        deadyear            party           party_english     
 Min.   :1882     Length:249957      Length:249957      Length:249957     
 1st Qu.:1929     Class :character   Class :character   Class :character  
 Median :1944     Mode  :character   Mode  :character   Mode  :character  
 Mean   :1943                                                             
 3rd Qu.:1956                                                             
 Max.   :1993                                                             
 NA's   :138417                                                           
 party_otherlanguage whogov_partyid     partyfacts_id        core       
 Length:249957       Length:249957      Min.   :   3    Min.   :0.0000  
 Class :character    Class :character   1st Qu.:1760    1st Qu.:1.0000  
 Mode  :character    Mode  :character   Median :3343    Median :1.0000  
                                        Mean   :3419    Mean   :0.8672  
                                        3rd Qu.:4998    3rd Qu.:1.0000  
                                        Max.   :9015    Max.   :1.0000  
                                        NA's   :34897                   
    minister          leader       classification     portfolio_1       
 Min.   :0.0000   Min.   :0.0000   Length:249957      Length:249957     
 1st Qu.:0.0000   1st Qu.:0.0000   Class :character   Class :character  
 Median :1.0000   Median :0.0000   Mode  :character   Mode  :character  
 Mean   :0.7194   Mean   :0.0352                                        
 3rd Qu.:1.0000   3rd Qu.:0.0000                                        
 Max.   :1.0000   Max.   :1.0000                                        
 NA's   :4                                                              
  prestige_1        portfolio_2         prestige_2        portfolio_3       
 Length:249957      Length:249957      Length:249957      Length:249957     
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
  prestige_3        portfolio_4         prestige_4          m_finance      
 Length:249957      Length:249957      Length:249957      Min.   :0.00000  
 Class :character   Class :character   Class :character   1st Qu.:0.00000  
 Mode  :character   Mode  :character   Mode  :character   Median :0.00000  
                                                          Mean   :0.03546  
                                                          3rd Qu.:0.00000  
                                                          Max.   :1.00000  
                                                                           
   m_defense       m_agriculture     m_foreignaffairs 
 Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
 1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
 Median :0.00000   Median :0.00000   Median :0.00000  
 Mean   :0.03273   Mean   :0.03201   Mean   :0.03509  
 3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
 Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
 NA's   :1                                            </code></pre>
</div>
</div>
<section id="inspecting-the-variables-in-a-data.frame" class="level3">
<h3 class="anchored" data-anchor-id="inspecting-the-variables-in-a-data.frame">Inspecting the variables in a <code>data.frame</code></h3>
<p>You can use the <code>$</code> symbol to refer to specific variables inside a <code>data.frame</code>. Your code will look something like <code>data_frame$variable</code>. For instance, we may continue exploring the dataset by looking at how long the time series is (which years are covered by the data) and how many unique countries are included. Let’s start with the year variable, which available as <code>who_gov$year</code>. We can use <code>range()</code> to learn when the time series starts and ends:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(who_gov<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1963 2021</code></pre>
</div>
</div>
<p>Or we could use summary to get summary statistics for this variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(who_gov<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1963    1984    1998    1996    2010    2021 </code></pre>
</div>
</div>
<p>The first observation is from 1963 and the last observation is from 2021. Maybe we want to get a sense of how many observations there are from each year in the time series? If so, we could use <code>table()</code> to get a frequency table showing the number of observations per year:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 
  14   14   14 2767 2743 2809 2879 2961 3086 3217 3290 3314 3495 3534 3640 3687 
1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 
3782 3813 3955 3975 4153 4187 4100 4167 4215 4203 4216 4074 4027 4331 4671 4852 
1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 
5040 5236 5242 5191 5239 5229 5375 5348 5233 5177 5115 5175 5255 5211 5289 5332 
2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 
5272 5353 5366 5329 5271 5247 5242 5280 5243 5249 5233 </code></pre>
</div>
</div>
<p>The table that R spits out in the console is a little ugly, but it is organized as follows: below each unique value on the variable (here <code>year</code>) it shows the number of observations with that value. So for instance, there are 5239 observations from the year 1999.</p>
<p>We notice that the first year is 1963 and that there are only 14 observations each year for 1963, 1964, and 1965. Combined with our sense that there must have been more than 14 cabinet ministers in the world also in these years and the fact that <span class="citation" data-cites="nyrup2020governs">Nyrup and Bramwell (<a href="#ref-nyrup2020governs" role="doc-biblioref">2020</a>)</span> write that their dataset starts in 1966, this information should make us somewhat suspicious! We will investigate this more below.</p>
<p>For now, we move on to exploring coverage of different countries. The name of the country of each observation is stored in <code>who_gov$country_name</code>. We first want to know how many unique countries there are. Using <code>unique()</code> we can print out all the unique values on <code>who_gov$country_name</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(who_gov<span class="sc">$</span>country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Afghanistan"                          
  [2] "Albania"                              
  [3] "Algeria"                              
  [4] "Angola"                               
  [5] "Argentina"                            
  [6] "Armenia"                              
  [7] "Australia"                            
  [8] "Austria"                              
  [9] "Azerbaijan"                           
 [10] "Bahrain"                              
 [11] "Bangladesh"                           
 [12] "Belarus"                              
 [13] "Belgium"                              
 [14] "Benin"                                
 [15] "Bhutan"                               
 [16] "Bolivia"                              
 [17] "Bosnia &amp; Herzegovina"                 
 [18] "Botswana"                             
 [19] "Brazil"                               
 [20] "Brunei"                               
 [21] "Bulgaria"                             
 [22] "Burkina Faso"                         
 [23] "Burundi"                              
 [24] "Cambodia"                             
 [25] "Cameroon"                             
 [26] "Canada"                               
 [27] "Cape Verde"                           
 [28] "Central African Republic"             
 [29] "Chad"                                 
 [30] "Chile"                                
 [31] "China"                                
 [32] "Colombia"                             
 [33] "Comoros"                              
 [34] "Costa Rica"                           
 [35] "Croatia"                              
 [36] "Cuba"                                 
 [37] "Cyprus"                               
 [38] "Czechoslovakia"                       
 [39] "Czechia"                              
 [40] "Denmark"                              
 [41] "Djibouti"                             
 [42] "Dominican Republic"                   
 [43] "Congo - Kinshasa"                     
 [44] "Ecuador"                              
 [45] "Egypt"                                
 [46] "El Salvador"                          
 [47] "Equatorial Guinea"                    
 [48] "Eritrea"                              
 [49] "Estonia"                              
 [50] "Ethiopia"                             
 [51] "Fiji"                                 
 [52] "Finland"                              
 [53] "France"                               
 [54] "Gabon"                                
 [55] "Gambia"                               
 [56] "East Germany"                         
 [57] "Georgia"                              
 [58] "Germany"                              
 [59] "Ghana"                                
 [60] "Greece"                               
 [61] "Grenada"                              
 [62] "Guatemala"                            
 [63] "Guinea"                               
 [64] "Guinea-Bissau"                        
 [65] "Guyana"                               
 [66] "Haiti"                                
 [67] "Honduras"                             
 [68] "Hungary"                              
 [69] "Iceland"                              
 [70] "India"                                
 [71] "Indonesia"                            
 [72] "Iran"                                 
 [73] "Iraq"                                 
 [74] "Ireland"                              
 [75] "Israel"                               
 [76] "Italy"                                
 [77] "Côte d’Ivoire"                        
 [78] "Jamaica"                              
 [79] "Japan"                                
 [80] "Jordan"                               
 [81] "Kazakhstan"                           
 [82] "Kenya"                                
 [83] "Kuwait"                               
 [84] "Kyrgyzstan"                           
 [85] "Laos"                                 
 [86] "Latvia"                               
 [87] "Lebanon"                              
 [88] "Lesotho"                              
 [89] "Liberia"                              
 [90] "Libya"                                
 [91] "Lithuania"                            
 [92] "Luxembourg"                           
 [93] "North Macedonia"                      
 [94] "Madagascar"                           
 [95] "Malawi"                               
 [96] "Malaysia"                             
 [97] "Maldives"                             
 [98] "Mali"                                 
 [99] "Malta"                                
[100] "Mauritania"                           
[101] "Mauritius"                            
[102] "Mexico"                               
[103] "Moldova"                              
[104] "Mongolia"                             
[105] "Montenegro"                           
[106] "Morocco"                              
[107] "Mozambique"                           
[108] "Myanmar (Burma)"                      
[109] "Namibia"                              
[110] "Nepal"                                
[111] "Netherlands"                          
[112] "New Zealand"                          
[113] "Nicaragua"                            
[114] "Niger"                                
[115] "Nigeria"                              
[116] "North Korea"                          
[117] "North Vienam"                         
[118] "Norway"                               
[119] "Oman"                                 
[120] "Pakistan"                             
[121] "Panama"                               
[122] "Papua New Guinea"                     
[123] "Paraguay"                             
[124] "Peru"                                 
[125] "Philippines"                          
[126] "Poland"                               
[127] "Portugal"                             
[128] "Qatar"                                
[129] "Congo - Brazzaville"                  
[130] "Romania"                              
[131] "Russia"                               
[132] "Rwanda"                               
[133] "São Tomé &amp; Príncipe"                  
[134] "Saudi Arabia"                         
[135] "Senegal"                              
[136] "Serbia"                               
[137] "Sierra Leone"                         
[138] "Singapore"                            
[139] "Slovakia"                             
[140] "Slovenia"                             
[141] "Somalia"                              
[142] "South Africa"                         
[143] "South Korea"                          
[144] "South Sudan"                          
[145] "South Vietnam"                        
[146] "People's Democratic Republic of Yemen"
[147] "Spain"                                
[148] "Sri Lanka"                            
[149] "Sudan"                                
[150] "Suriname"                             
[151] "Eswatini"                             
[152] "Sweden"                               
[153] "Switzerland"                          
[154] "Syria"                                
[155] "Taiwan"                               
[156] "Tajikistan"                           
[157] "Tanzania"                             
[158] "Thailand"                             
[159] "Timor-Leste"                          
[160] "Togo"                                 
[161] "Trinidad &amp; Tobago"                    
[162] "Tunisia"                              
[163] "Turkey"                               
[164] "Turkmenistan"                         
[165] "Uganda"                               
[166] "Ukraine"                              
[167] "United Arab Emirates"                 
[168] "United Kingdom"                       
[169] "Uruguay"                              
[170] "United States"                        
[171] "Soviet Union"                         
[172] "Uzbekistan"                           
[173] "Venezuela"                            
[174] "Vietnam"                              
[175] "Yemen"                                
[176] "Yugoslavia"                           
[177] "Zambia"                               
[178] "Zimbabwe"                             </code></pre>
</div>
</div>
<p>Typically, we are not interested in reading this full list. We just want to know how many different countries there are. We can use <code>length()</code> to find out how long a vector is. Using <code>unique()</code> will create vector with all the unique values and finding the length of this vector will tell us how many unique countries there are in the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(who_gov<span class="sc">$</span>country_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 178</code></pre>
</div>
</div>
<p>We learn that there are 178 unique country names in the dataset.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>If we want to get a sense of what types of positions the people in the WhoGov dataset held, we can similarly use <code>table()</code> on the <code>who_gov$portfolio_1</code> which contains a standardized coding of the different types of positions (There was no way for us to know this in advance. We had to look up the <a href="https://static.cambridge.org/content/id/urn:cambridge.org:id:article:S0003055420000490/resource/name/S0003055420000490sup001.pdf">WhoGov codebook</a>, which is generally what you should do if you wonder how to use a dataset created by others. )</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>portfolio_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                        Ageing &amp; Elderly 
                                     125 
Agriculture, Food, Fisheries &amp; Livestock 
                                   11513 
     Audit, Oversight &amp; Internal Affairs 
                                    1142 
                       Children &amp; Family 
                                    1120 
                           Civil Service 
                                    2109 
            Communications &amp; Information 
                                   10144 
             Construction &amp; Public Works 
                                    7417 
          Correctional Services &amp; Police 
                                     854 
                      Culture &amp; Heritage 
                                    4670 
   Defense, Military &amp; National Security 
                                   11931 
            Education, Training &amp; Skills 
                                   12373 
                                  Energy 
                                    5750 
       Enterprises, Companies &amp; Business 
                                    2740 
                             Environment 
                                    8364 
       Executive &amp; Legislative Relations 
                                    3227 
              Finance, Budget &amp; Treasury 
                                   11046 
              Foreign Economic Relations 
                                    4774 
                       Foreign Relations 
                                   11699 
                General Economic Affairs 
                                    3695 
     Government, Interior &amp; Home Affairs 
                                    9348 
                 Health &amp; Social Welfare 
                                   10256 
                                 Housing 
                                    2358 
                Immigration &amp; Emigration 
                                    1149 
                     Industry &amp; Commerce 
                                    7471 
                 Justice &amp; Legal Affairs 
                                    8037 
     Labor, Employment &amp; Social Security 
                                    6496 
                        Local Government 
                                    1616 
                              Minorities 
                                     390 
                       Natural Resources 
                                    1600 
                                   Other 
                                   11653 
                  Planning &amp; Development 
                                    7611 
                        Political Reform 
                                     727 
                  Properties &amp; Buildings 
                                     137 
                                Regional 
                                    2319 
                                Religion 
                                    1545 
          Science, Technology &amp; Research 
                                    2171 
                                  Sports 
                                    2465 
            Tax, Revenue &amp; Fiscal Policy 
                                     275 
                                 Tourism 
                                    1684 
                               Transport 
                                    3470 
                                Veterans 
                                     630 
                       Without Portfolio 
                                    2068 
                                   Women 
                                     835 
                                   Youth 
                                     453 </code></pre>
</div>
</div>
</section>
</section>
<section id="changing-or-adding-variables" class="level2">
<h2 class="anchored" data-anchor-id="changing-or-adding-variables">Changing or adding variables</h2>
<p>Just as we can use the assignment operator,<code>&lt;-</code> to create objects, we can use it to create or change variables inside a <code>data.frame</code>. If you run the following line, you will create a new column in the <code>who_gov</code>, which always takes the value of 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>ones <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This variable is obviously not super interesting. We would rather have a variable that actually varies. Let’s try to make create a variable called <code>who_gov$female</code> which will take the value 1 if the person is female and 0 otherwise. We will base this variable on the variable <code>who_gov$gender</code> which is already in the dataset and which takes the values “Male”, “Female”, “Other”, and “Unknown”. The function <code>ifelse()</code> is very useful for creating a new variable based on some conditions (for example based on e values on some existing variable):</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-72"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-72" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-72-1" class="code-annotation-target"><a href="#annotated-cell-72-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>female <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(who_gov<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"Female"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-72" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-72-2" class="code-annotation-target"><a href="#annotated-cell-72-2" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">1</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-72" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-72-3" class="code-annotation-target"><a href="#annotated-cell-72-3" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">0</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-72" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-72" data-code-annotation="1">check if the value on `who_gov$gender is “Female”</span>
</dd>
<dt data-target-cell="annotated-cell-72" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-72" data-code-annotation="2">Give those cases the value 1.</span>
</dd>
<dt data-target-cell="annotated-cell-72" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-72" data-code-annotation="3">Giv other cases the value 0.</span>
</dd>
</dl>
</div>
</div>
<p>We now created a new variable called <code>who_gov$female</code>. Since this variable is based on the variable <code>who_gov$gender</code>, we can compare the two variables against each other to verify that the <code>who_gov$female</code> was created correctly. We can use <code>table()</code> to create a cross table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>female, who_gov<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Female   Male  Other Unknown
  0      0 222937      5     177
  1  23170      0      0       0</code></pre>
</div>
</div>
<p>We see that all the observations with “Female” as the value on the <code>who_gov$gender</code> variable has the value 1 on the <code>who_gov$female</code> variable and that all those with other values on the <code>who_gov$gender</code> variable has the value 0 on <code>who_gov$female</code> variable. Woot!</p>
<p>Perhaps we don’t want observations with “Unknown” on <code>who_gov$gender</code> to be coded 0 on the <code>who_gov$female</code> variable? Perhaps giving these a missing value (<code>NA</code>) would be more accurate. If so, we can overwrite the <code>who_gov$female</code> variable like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-74"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-74" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-74-1" class="code-annotation-target"><a href="#annotated-cell-74-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>female <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(who_gov<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"Unknown"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-74" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-74-2" class="code-annotation-target"><a href="#annotated-cell-74-2" aria-hidden="true" tabindex="-1"></a>                         <span class="cn">NA</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-74" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-74-3" class="code-annotation-target"><a href="#annotated-cell-74-3" aria-hidden="true" tabindex="-1"></a>                         who_gov<span class="sc">$</span>female)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-74" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-74" data-code-annotation="1">Check if the value on `whogov$gender is “Unknown”</span>
</dd>
<dt data-target-cell="annotated-cell-74" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-74" data-code-annotation="2">Give those cases the value NA</span>
</dd>
<dt data-target-cell="annotated-cell-74" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-74" data-code-annotation="3">Give other cases the value they already have on <code>who_gov$female</code></span>
</dd>
</dl>
</div>
</div>
<p>Let’s check that this did what we intended it to do:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>female, who_gov<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    Female   Male  Other Unknown
  0      0 222937      5       0
  1  23170      0      0       0</code></pre>
</div>
</div>
<p>This looks like expected. However, the people with “Unknown” on <code>who_gov$gender</code> are no longer displayed in the table. This has to do with how R treats missing values. To be absolutely sure, we can use <code>is.na()</code> to find out what values observations that now have <code>NA</code> on <code>who_gov$female</code> have on <code>who_gov$gender</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(who_gov<span class="sc">$</span>female), who_gov<span class="sc">$</span>gender)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       
        Female   Male  Other Unknown
  FALSE  23170 222937      5       0
  TRUE       0      0      0     177</code></pre>
</div>
</div>
<p>This confirms that the 177 people with “Unknown” <code>who_gov$gender</code> now have <code>NA</code> on <code>who_gov$female</code> (and there are no other observations with <code>NA</code> on <code>who_gov$female</code>).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ifelse()
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ifelse()</code> is incredibly useful for creating and recoding variables. <code>ifelse()</code> takes three arguments. The first argument should be a logical condition. For example is the value on <code>who_gov$gender</code> equal to “Female”. The second argument tells R what should happen if the logical condition is true. In our case, we want to return the value 1 if the condition is true. The third argument tells R what should happen if the condition is false. In our case, we want the value 0 if the condition is false:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>female <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(who_gov<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">"Female"</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-1-2" class="code-annotation-target"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">1</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>                         <span class="dv">0</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-1" data-code-annotation="1">Is <code>who_gov$gender</code> equal to “Female” (This will be evaluated for each row in the dataset)</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-1" data-code-annotation="2">If so, we want the value 1.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-1" data-code-annotation="3">If not, we want the value 0.</span>
</dd>
</dl>
</div>
</div>
</div>
</div>
</section>
<section id="sec-data-types" class="level2">
<h2 class="anchored" data-anchor-id="sec-data-types">Different data types</h2>
<p>Variables stored in a <code>data.frame</code> are vectors. More specifically, they are so-called “atomic vectors” meaning that all their values need to be of the same <em>type</em>. What do we mean by <em>type</em>?</p>
<p>In the <code>who_gov</code> <code>data.frame</code>, there are variables of two different types:</p>
<ol type="1">
<li>Some of the variables are integers. They are numbers and more specifically “whole numbers” (not fractions/without decimals). We have already seen one example: the variable <code>who_gov$year</code> . Another example is the variable <code>who$leader</code> which takes the value of 1 if the person in question was the country leader in the relevant country year and 0 otherwise. Because integers are numbers, we can do various calculations with them. For instance, we can use <code>mean()</code> to calculate the share of observations that are of country leaders:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who_gov<span class="sc">$</span>leader)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03520205</code></pre>
</div>
</div>
<p>The mean of this binary variable is 0.0352021, which means that about 0.04 or 4 per cent of the observations are of leaders.</p>
<ol start="2" type="1">
<li>Some of the variables are character vectors. They are just interpreted by R as text. Often, we will refer to such character vectors as “strings”. We have already seen two examples, the <code>who_gov$portfolio_1</code> and <code>who_gov$country_name</code>. The values in character vectors surrounded by quotation marks (<code>""</code>), which is how R stores text. We cannot do mathematical operations on character vectors. We can, however, do other stuff such as creating frequency tables, using <code>table()</code>. There are a bunch of functions for manipulating strings in R, such as <code>toupper()</code> which changes all the characters in the vector to UPPER CASE (we use <code>head()</code> to avoid printing out the full vector):</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">toupper</span>(who_gov<span class="sc">$</span>country_name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "AFGHANISTAN" "AFGHANISTAN" "AFGHANISTAN" "AFGHANISTAN" "AFGHANISTAN"
[6] "AFGHANISTAN"</code></pre>
</div>
</div>
<p>While these are two types of variables available in <code>who_gov</code>, they are not the only possible data types. Let’s look at some more types:</p>
<ol start="3" type="1">
<li>Numbers obviously don’t have to be integers. We can also have the data type, “numeric”, which also allows for fractions. For instance, we may calculate the share of office holders within each year that are country leaders and add this variable to the dataset. There are many ways of calculating this variable, but one approach would be:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-79"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-79" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-79-1" class="code-annotation-target"><a href="#annotated-cell-79-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>leader_share_in_year <span class="ot">&lt;-</span> <span class="fu">ave</span>(who_gov<span class="sc">$</span>leader,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-79" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-79-2" class="code-annotation-target"><a href="#annotated-cell-79-2" aria-hidden="true" tabindex="-1"></a>                                    who_gov<span class="sc">$</span>year,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-79" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-79-3" class="code-annotation-target"><a href="#annotated-cell-79-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">FUN =</span> mean)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-79" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-79" data-code-annotation="1"><code>ave()</code> allows you to apply a function to variable within each “group” on another variable. We are applying some function to the variable <code>who_gov$leader</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-79" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-79" data-code-annotation="2">We are going to group the data by <code>who_gov$year</code> so that we apply the function separately for groups observations that share the same value on <code>who_gov$year</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-79" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-79" data-code-annotation="3">The function that we apply to <code>who_gov$leader</code> within each group is <code>mean()</code></span>
</dd>
</dl>
</div>
</div>
<p>Don’t worry too much about the above code yet. Instead look at at the first six rows of the <code>who_gov$leader_share_in_year</code> variable (The first six values are all the same, reflecting that all these observations are from the same year):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(who_gov<span class="sc">$</span>leader_share_in_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04625949 0.04625949 0.04625949 0.04625949 0.04625949 0.04625949</code></pre>
</div>
</div>
<p>In contrast to the integers we saw before, this variable is a numeric vector, which means that it can consists of fractions (of course, in this instance, it only consists of fractions). Since, these are also numbers, we can do mathematical operations and apply functions that do these, just as we did for integers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who_gov<span class="sc">$</span>leader_share_in_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03520205</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Logical vectors only take the values <code>TRUE</code> and <code>FALSE</code>. We can abbreviate <code>TRUE</code> as <code>T</code> and <code>FALSE</code> as <code>F</code>, but our code generally becomes more readable if we write out the full values <code>TRUE</code> and <code>FALSE</code>. For instance, we can create a variable that takes the value <code>TRUE</code> if the person is older than 70 years and <code>FALSE</code> otherwise, using the variables <code>who_gov$birthyear</code> and <code>who_gov$year</code>:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-82"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-82" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-82-1" class="code-annotation-target"><a href="#annotated-cell-82-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>older_than_70 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(who_gov<span class="sc">$</span>year <span class="sc">-</span> who_gov<span class="sc">$</span>birthyear <span class="sc">&gt;</span> <span class="dv">70</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-82" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-82-2" class="code-annotation-target"><a href="#annotated-cell-82-2" aria-hidden="true" tabindex="-1"></a>                                <span class="cn">TRUE</span>,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-82" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-82-3" class="code-annotation-target"><a href="#annotated-cell-82-3" aria-hidden="true" tabindex="-1"></a>                                <span class="cn">FALSE</span> )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-82" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-82" data-code-annotation="1">Take year minus birth year to calculate the age and check whether the age is greater than 70</span>
</dd>
<dt data-target-cell="annotated-cell-82" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-82" data-code-annotation="2">If so, give the value <code>TRUE</code></span>
</dd>
<dt data-target-cell="annotated-cell-82" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="3" data-code-cell="annotated-cell-82" data-code-annotation="3">If not, give the value <code>FALSE</code></span>
</dd>
</dl>
</div>
</div>
<p>We can use <code>table()</code> to see how many of observations that are of people older than 70 in the year they were observed:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>older_than_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 FALSE   TRUE 
105368   6172 </code></pre>
</div>
</div>
<p>R can treat logical vectors as numeric. If we try to apply arithmetic operations on a logical vector, R will treat <code>TRUE</code> as 1s and <code>FALSE</code> as 0. Thus, we can calculate the share observations older than 70, using <code>mean()</code> (Because we don’t know the birth year of all the observations, we have <code>NA</code> values in the <code>who_gov$older_than_70</code> variable and we must remember to specify the <code>na.rm = TRUE</code> argument):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who_gov<span class="sc">$</span>older_than_70, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.05533441</code></pre>
</div>
</div>
<p>There are also some other types of variables that we will encounter, such as dates and factors, but these will be based on the four categories discussed above.</p>
<section id="checking-which-type-a-variable-is" class="level3">
<h3 class="anchored" data-anchor-id="checking-which-type-a-variable-is">Checking which type a variable is</h3>
<p>You can check the data type of a variable using the or <code>class()</code> function. For instance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>leader_share_in_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>older_than_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<p>You can also <code>class()</code> on other types of R objects to find out what kinds of objects they are. For instance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>There are also functions for checking if an object is of a specific type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="changing-the-data-type" class="level3">
<h3 class="anchored" data-anchor-id="changing-the-data-type">Changing the data type</h3>
<p>We can change the types of variables. Maybe we don’t want <code>who_gov$older_than_70</code> to be stored as a logical vector, but would prefer it to be stored as an integer vector. If so, we can use <code>as.integer()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>older_than_70 <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(who_gov<span class="sc">$</span>older_than_70)</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>older_than_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(who_gov<span class="sc">$</span>older_than_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     0      1 
105368   6172 </code></pre>
</div>
</div>
<p><code>TRUE</code> has now been replaced with 1 and <code>FALSE</code> has been replaced with 0 in <code>who_gov$older_than_70</code> and the class has changed to “integer”.</p>
<p>We can also force it to become a character vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>older_than_70 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(who_gov<span class="sc">$</span>older_than_70)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(who_gov<span class="sc">$</span>older_than_70)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>If so, 1 will be changed into “1” and 0 will be changed into “0”. For us, this may seem like a small change, but since R is now treating these values as text, we can no longer do mathematical operations. For instance, calculating the mean will just return an <code>NA</code> and a warning message:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who_gov<span class="sc">$</span>older_than_70, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(who_gov$older_than_70, na.rm = TRUE): argument is not
numeric or logical: returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>We can force numbers to be text and if numbers are stored as text, we can turn them back to numbers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>older_than_70 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(who_gov<span class="sc">$</span>older_than_70)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(who_gov<span class="sc">$</span>older_than_70, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.05533441</code></pre>
</div>
</div>
<p>However, not all conversions from text to numbers are possible. For instance, R has no idea how to make a numeric variable based on the country names. Attempting this will just return a bunch of missing values:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>country_name_numeric <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(who_gov<span class="sc">$</span>country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(who_gov<span class="sc">$</span>country_name_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA NA NA NA</code></pre>
</div>
</div>
</section>
<section id="missing-values" class="level3">
<h3 class="anchored" data-anchor-id="missing-values">Missing values</h3>
<p>Missing values are stored in R as <code>NA</code>. It is not possible to do any computations on missing values and we have to exclude them before we can do most operations. You can check if a vector includes missing values by using <code>is.na()</code>. If you want to see how many <code>NA</code>s there are, you can combine <code>is.na()</code> with <code>table()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="fu">is.na</span>(who_gov<span class="sc">$</span>older_than_70))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 FALSE   TRUE 
111540 138417 </code></pre>
</div>
</div>
</section>
</section>
<section id="subsetting-data.frames-and-vectors" class="level2">
<h2 class="anchored" data-anchor-id="subsetting-data.frames-and-vectors">Subsetting <code>data.frame</code>s and vectors</h2>
<p>You can select specific elements of a <code>data.frame</code> or vector in R using square brackets(<code>[]</code>). Vectors are one-dimensional, so we just need a number of range of numbers inside the square brackets. For instance, if we want the sixth element of <code>who_gov$country_name</code> we can write:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>country_name[<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan"</code></pre>
</div>
</div>
<p>or we could get a the sixth, the 7900th and the 25000th element like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>country_name[<span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7900</span>, <span class="dv">25000</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan" "Australia"   "Brazil"     </code></pre>
</div>
</div>
<p>If we want to, we can overwrite specific elements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>country_name[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"Just to illustrate"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can specify ranges of observations we want, using <code>:</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>who_gov<span class="sc">$</span>country_name[<span class="dv">4</span><span class="sc">:</span><span class="dv">8</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Afghanistan"        "Afghanistan"        "Just to illustrate"
[4] "Afghanistan"        "Afghanistan"       </code></pre>
</div>
</div>
<p><code>data.frame</code>s are two-dimensional, so we need to specify whether we want to select rows or columns or both. We use square brackets with a comma that separates between rows (before the comma) and columns (after the comma) <code>[,]</code>. For instance, we can get the 6th row of the 4th column in <code>who_gov</code> like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>who_gov[<span class="dv">6</span>,<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
<p>Since the columns are named, we can also use the column names to subset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>who_gov[<span class="dv">6</span>,<span class="st">"country_name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Just to illustrate"</code></pre>
</div>
</div>
<p>We can leave either the rows or the columns empty inside the square brackets to select all rows or columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>who_gov[<span class="dv">6</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  year country_isocode       country_name id         position    name title
6 1966             AFG Just to illustrate  6 Min. Of Commerce Ali Nur   Dr.
  gender birthyear deadyear   party party_english party_otherlanguage
6   Male        NA     &lt;NA&gt; unknown          &lt;NA&gt;                &lt;NA&gt;
  whogov_partyid partyfacts_id core minister leader       classification
6    AFG-unknown            NA    1        1      0 Minister (Full Rank)
          portfolio_1 prestige_1 portfolio_2 prestige_2 portfolio_3 prestige_3
6 Industry &amp; Commerce     Medium        &lt;NA&gt;       &lt;NA&gt;        &lt;NA&gt;       &lt;NA&gt;
  portfolio_4 prestige_4 m_finance m_defense m_agriculture m_foreignaffairs
6        &lt;NA&gt;       &lt;NA&gt;         0         0             0                0
  ones female leader_share_in_year older_than_70 country_name_numeric
6    1      0           0.04625949            NA                   NA</code></pre>
</div>
</div>
<p>We can use logical conditions to select specific rows or columns. For instance, we can select all rows from Norway like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>Norway <span class="ot">&lt;-</span> who_gov[who_gov<span class="sc">$</span>country_name <span class="sc">==</span> <span class="st">"Norway"</span>,] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We now have the tools we need to further investigate the suspicious observations from before 1966 that we discovered above. We can create a new <code>data.frame</code> with only these observations to investigate:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>before_1966 <span class="ot">&lt;-</span> who_gov[who_gov<span class="sc">$</span>year <span class="sc">&lt;</span> <span class="dv">1966</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A quick investigation of the <code>before_1966</code> reveals that these are all observations from the United States.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(before_1966<span class="sc">$</span>country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
United States 
           42 </code></pre>
</div>
</div>
<p>Perhaps it doesn’t make sense for our analysis to include a longer time series just for the United States. If so, we may remove these observations from the dataset like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>who_gov <span class="ot">&lt;-</span> who_gov[who_gov<span class="sc">$</span>year <span class="sc">&gt;=</span> <span class="dv">1966</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lists" class="level2">
<h2 class="anchored" data-anchor-id="lists">Lists</h2>
<p>We will often find it useful to store information in lists. Lists are also a type of vector, <a href="@sec-data-types">but unlike the atomic vectors which can only contain elements of the same data type</a>, lists can contain elements of any types. The elements of a list may themselves be vectors. This is a simple example of a list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>example_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">products =</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"milk"</span>, <span class="st">"bread"</span>), </span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">price =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">18</span>, <span class="dv">25</span>), </span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">store =</span> <span class="st">"kiwi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The list wouldn’t have to be named, we could just as well have created:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>example_list_2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"milk"</span>, <span class="st">"bread"</span>), </span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">18</span>, <span class="dv">25</span>), </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"kiwi"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In either case, we could use the double square brackets to extract the different parts of the list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>example_list_2[[<span class="dv">1</span>]] <span class="co"># this will you the first element, which is a character vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple" "milk"  "bread"</code></pre>
</div>
</div>
<p>If the list is named, we can use the <code>$</code> to refer to its elements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>example_list<span class="sc">$</span>products</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple" "milk"  "bread"</code></pre>
</div>
</div>
<p>Using subsetting, we can find elements within each element of the list:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>example_list_2[[<span class="dv">1</span>]][<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bread"</code></pre>
</div>
</div>
<p>And we can use the assignment operator to overwrite any value:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>example_list_2[[<span class="dv">1</span>]][<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"white bread"</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(example_list_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apple"       "milk"        "white bread"

[[2]]
[1]  5 18 25

[[3]]
[1] "kiwi"</code></pre>
</div>
</div>
</section>
<section id="checking-what-is-stored-inside-any-object" class="level2">
<h2 class="anchored" data-anchor-id="checking-what-is-stored-inside-any-object">Checking what is stored inside any object</h2>
<p>We will encounter many different types of objects in R and sometimes we don’t really know how information is stored inside them. The function <code>str()</code> can show you the structure of any R object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(who_gov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   249915 obs. of  36 variables:
 $ year                : int  1966 1966 1966 1966 1966 1966 1966 1966 1966 1966 ...
 $ country_isocode     : chr  "AFG" "AFG" "AFG" "AFG" ...
 $ country_name        : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...
 $ id                  : int  1 2 3 4 5 6 7 8 9 10 ...
 $ position            : chr  "King" "Prime Min." "1st Dep. Prime Min." "2nd Dep. Prime Min." ...
 $ name                : chr  "Mohammed Zahir" "Maiwandwal Mohammed Hashim" "Nur Ahmed Etemadi" "Shalizi Abdus Sattar" ...
 $ title               : chr  NA NA NA NA ...
 $ gender              : chr  "Male" "Male" "Male" "Male" ...
 $ birthyear           : int  NA NA NA NA NA NA NA NA NA NA ...
 $ deadyear            : chr  NA NA NA NA ...
 $ party               : chr  "independent" "pdpa" "independent" "independent" ...
 $ party_english       : chr  "independent" "Progressive Democratic Party of Afghanistan" "independent" "independent" ...
 $ party_otherlanguage : chr  "independent" NA "independent" "independent" ...
 $ whogov_partyid      : chr  "AFG-independent" "AFG-pdpa" "AFG-independent" "AFG-independent" ...
 $ partyfacts_id       : num  4908 8700 4908 4908 NA ...
 $ core                : int  1 1 1 1 1 1 1 1 1 1 ...
 $ minister            : int  0 0 0 0 1 1 1 1 1 1 ...
 $ leader              : int  0 1 0 0 0 0 0 0 0 0 ...
 $ classification      : chr  "Member, Royal Family" "Prime Minister" "Deputy Prime Minister" "Deputy Prime Minister" ...
 $ portfolio_1         : chr  NA NA NA NA ...
 $ prestige_1          : chr  NA NA NA NA ...
 $ portfolio_2         : chr  NA NA NA NA ...
 $ prestige_2          : chr  NA NA NA NA ...
 $ portfolio_3         : chr  NA NA NA NA ...
 $ prestige_3          : chr  NA NA NA NA ...
 $ portfolio_4         : chr  NA NA NA NA ...
 $ prestige_4          : chr  NA NA NA NA ...
 $ m_finance           : int  0 0 0 0 0 0 0 0 1 0 ...
 $ m_defense           : int  0 0 0 0 0 0 0 0 0 0 ...
 $ m_agriculture       : int  0 0 0 0 1 0 0 0 0 0 ...
 $ m_foreignaffairs    : int  0 0 0 0 0 0 0 0 0 1 ...
 $ ones                : num  1 1 1 1 1 1 1 1 1 1 ...
 $ female              : num  0 0 0 0 0 0 0 0 0 0 ...
 $ leader_share_in_year: num  0.0463 0.0463 0.0463 0.0463 0.0463 ...
 $ older_than_70       : num  NA NA NA NA NA NA NA NA NA NA ...
 $ country_name_numeric: num  NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(example_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ products: chr [1:3] "apple" "milk" "bread"
 $ price   : num [1:3] 5 18 25
 $ store   : chr "kiwi"</code></pre>
</div>
</div>
</section>
</section>
<section id="estimating-regression-models" class="level1">
<h1>Estimating regression models</h1>
<p>Quantitative political science projects typically involve estimating some kind of regression model. We expect you to be familiar with regression analysis from your previous methods training and will not cover the statistics of regression analysis in this course. We will, however, spend some time on how to present the results of regression models, so let’s briefly review how to estimate regression models in R:</p>
<p>We will consider one of the regression models reported in a recent article by <span class="citation" data-cites="grewal2023military">Grewal (<a href="#ref-grewal2023military" role="doc-biblioref">2023</a>)</span>. Grewal is interested in what accounts for the variation in whether the Algerian military engages in repression or exercises restraint when facing protesters. To this end, he used Facebook to conduct a survey of 2,235 self-reported military personnel. His dependent variable is the item: “Suppose, hypothetically, that military personnel are ordered to repress the protesters. Do you think the military would agree or refuse to repress the protesters?”, which respondents answered on a five-point scale from “very likely to refuse” to “very likely to agree.”</p>
<p>One of the factors that <span class="citation" data-cites="grewal2023military">Grewal (<a href="#ref-grewal2023military" role="doc-biblioref">2023</a>)</span> hypothesized would lead to restrain is whether protesters were perceived as nonviolent or as violent. His first independent variable is therefore a binary measure of whether the respondent perceived the protesters as non-violent.</p>
<p>He also includes a range of other independent and control variables in his model. You can read all about them in the article if you are interested. <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi%3A10.7910%2FDVN%2FOIJ5ZD">You can also find his data here</a>. We will limit ourselves to re-estimating his first model:</p>
<section id="lm" class="level2">
<h2 class="anchored" data-anchor-id="lm"><code>lm()</code></h2>
<p><span class="citation" data-cites="grewal2023military">Grewal (<a href="#ref-grewal2023military" role="doc-biblioref">2023</a>)</span> estimated a linear regression model, which you can do in R using the <code>lm()</code> function. The function first takes a formula argument, which you can think as the regression equation. The basic structure is like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>dependent_variable <span class="sc">~</span> independent_variable1 <span class="sc">+</span> independent_variable2 <span class="sc">+</span> independent_variable3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You first add your dependent variable followed by a the tilde sign (<code>~</code>). You then add one or more independent variables and you separate each independent variable by a <code>+</code> sign.</p>
<p>Next you need to specify the <code>data</code> argument. Here you just specify the dataset that you are using.</p>
<p><code>lm()</code> also takes a number of other arguments that sometimes may be useful, such as <code>weights</code> where you can specify weights if you are estimated a weighted regression. <code>subset</code> which you can use to subset the dataset and so on. We will not specify any of these additional arguments here.</p>
<p>Using <code>lm()</code>, we can thus reestimate Grewal’s first model like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-119"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-119" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-119-1" class="code-annotation-target"><a href="#annotated-cell-119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="annotated-cell-119-2"><a href="#annotated-cell-119-2" aria-hidden="true" tabindex="-1"></a>grewal_data <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"../data/algeria_military_survey.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span>
<span id="annotated-cell-119-3"><a href="#annotated-cell-119-3" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-119" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-119-4" class="code-annotation-target"><a href="#annotated-cell-119-4" aria-hidden="true" tabindex="-1"></a>grewal_model_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(restraint <span class="sc">~</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-119" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-119-5" class="code-annotation-target"><a href="#annotated-cell-119-5" aria-hidden="true" tabindex="-1"></a>                       nonvio2 <span class="sc">+</span> prime_frat <span class="sc">+</span> prime_future <span class="sc">+</span> prime_RU <span class="sc">+</span></span>
<span id="annotated-cell-119-6"><a href="#annotated-cell-119-6" aria-hidden="true" tabindex="-1"></a>                       prime_UN <span class="sc">+</span> oppose92coup2 <span class="sc">+</span> civwar <span class="sc">+</span> islamist <span class="sc">+</span></span>
<span id="annotated-cell-119-7"><a href="#annotated-cell-119-7" aria-hidden="true" tabindex="-1"></a>                       supp_sharia <span class="sc">+</span> active <span class="sc">+</span> conscript <span class="sc">+</span> soldier <span class="sc">+</span> junoff <span class="sc">+</span></span>
<span id="annotated-cell-119-8"><a href="#annotated-cell-119-8" aria-hidden="true" tabindex="-1"></a>                       senoff <span class="sc">+</span> branch2 <span class="sc">+</span> train_west <span class="sc">+</span> train_russia <span class="sc">+</span></span>
<span id="annotated-cell-119-9"><a href="#annotated-cell-119-9" aria-hidden="true" tabindex="-1"></a>                       train_china <span class="sc">+</span> young <span class="sc">+</span> sex <span class="sc">+</span> edu <span class="sc">+</span> urban_area <span class="sc">+</span></span>
<span id="annotated-cell-119-10"><a href="#annotated-cell-119-10" aria-hidden="true" tabindex="-1"></a>                       employed <span class="sc">+</span> student <span class="sc">+</span> arabic <span class="sc">+</span> econ1 <span class="sc">+</span> corr1 <span class="sc">+</span></span>
<span id="annotated-cell-119-11"><a href="#annotated-cell-119-11" aria-hidden="true" tabindex="-1"></a>                       dem <span class="sc">+</span> supp_opp_parties <span class="sc">+</span> continue <span class="sc">+</span> protested <span class="sc">+</span></span>
<span id="annotated-cell-119-12"><a href="#annotated-cell-119-12" aria-hidden="true" tabindex="-1"></a>                       preboutef <span class="sc">+</span> post_exp <span class="sc">+</span> mon <span class="sc">+</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-119" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-119-13" class="code-annotation-target"><a href="#annotated-cell-119-13" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">as.factor</span>(fgov),</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-119" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-119-14" class="code-annotation-target"><a href="#annotated-cell-119-14" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> grewal_data)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-119" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1,2" data-code-cell="annotated-cell-119" data-code-annotation="1">His dataset comes in a <code>.csv</code>-format so we will load the <code>readr</code> package and use <code>read_delim()</code> to load the data.</span>
</dd>
<dt data-target-cell="annotated-cell-119" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="4" data-code-cell="annotated-cell-119" data-code-annotation="2">We estimate the regression model using <code>lm()</code> and assign the results to an object <code>grewal_model_1</code> so that we can do stuff with it later. We start the formula by adding the dependent variable (<code>restraint</code>) followed by a <code>~</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-119" data-target-annotation="3">3</dt>
<dd>
<span data-code-lines="5,6,7,8,9,10,11,12" data-code-cell="annotated-cell-119" data-code-annotation="3">We add all the independent variables/covariates separated by the <code>+</code> sign.</span>
</dd>
<dt data-target-cell="annotated-cell-119" data-target-annotation="4">4</dt>
<dd>
<span data-code-lines="13" data-code-cell="annotated-cell-119" data-code-annotation="4"><code>fgov</code> measures which governorate the respondent is from. Grewal included governorate <em>fixed effects</em> which just means one dummy variable for each governorate. You can include these in your model formula using <code>as.factor()</code> around the variable that you want fixed effects on. When we are done specifying the formula, we end this argument using a <code>,</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-119" data-target-annotation="5">5</dt>
<dd>
<span data-code-lines="14" data-code-cell="annotated-cell-119" data-code-annotation="5">Finally, we specify the data argument.</span>
</dd>
</dl>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-120"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-120" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-120-1" class="code-annotation-target"><a href="#annotated-cell-120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(grewal_model_1 )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-120" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-120" data-code-annotation="1"><code>summary()</code> prints out a summary of the regression model in the console. This summary is good for us making sense of the the model when we are working in Rstudio, but is not how the model should be reported in your MA thesis or STV4030A assignments. We will show you how to generate <a href="https://pages.github.uio.no/oyvinsti/STV4030A/Quarto_documents/producing_tables.html">publication quality regression tables</a> in your Quarto documents and how to use <a href="https://pages.github.uio.no/oyvinsti/STV4030A/Visualization/data_viz_models.html">visualizations to present your regression models</a>. The summary is printed below:</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = restraint ~ nonvio2 + prime_frat + prime_future + 
    prime_RU + prime_UN + oppose92coup2 + civwar + islamist + 
    supp_sharia + active + conscript + soldier + junoff + senoff + 
    branch2 + train_west + train_russia + train_china + young + 
    sex + edu + urban_area + employed + student + arabic + econ1 + 
    corr1 + dem + supp_opp_parties + continue + protested + preboutef + 
    post_exp + mon + as.factor(fgov), data = grewal_data)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.1318 -0.3994  0.1661  0.2849  0.7718 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        0.340296   0.116016   2.933 0.003396 ** 
nonvio2            0.098405   0.027791   3.541 0.000408 ***
prime_frat        -0.023003   0.035303  -0.652 0.514747    
prime_future      -0.072684   0.035810  -2.030 0.042524 *  
prime_RU          -0.066233   0.036766  -1.801 0.071786 .  
prime_UN          -0.017195   0.035396  -0.486 0.627171    
oppose92coup2      0.041560   0.021020   1.977 0.048172 *  
civwar             0.014028   0.025565   0.549 0.583278    
islamist           0.019400   0.029871   0.649 0.516127    
supp_sharia        0.157501   0.036363   4.331 1.56e-05 ***
active            -0.002991   0.023729  -0.126 0.899714    
conscript         -0.015610   0.022980  -0.679 0.497058    
soldier            0.013436   0.024245   0.554 0.579536    
junoff             0.032761   0.030275   1.082 0.279338    
senoff             0.110452   0.061325   1.801 0.071847 .  
branch2Land        0.018626   0.027530   0.677 0.498754    
train_west        -0.095806   0.057540  -1.665 0.096076 .  
train_russia      -0.019452   0.033929  -0.573 0.566491    
train_china        0.035077   0.104884   0.334 0.738090    
young              0.132958   0.041903   3.173 0.001533 ** 
sex                0.020073   0.053541   0.375 0.707764    
edu               -0.013767   0.011900  -1.157 0.247464    
urban_area         0.006059   0.021512   0.282 0.778223    
employed           0.060536   0.024347   2.486 0.012991 *  
student           -0.017229   0.045347  -0.380 0.704032    
arabic             0.093961   0.028645   3.280 0.001056 ** 
econ1             -0.041342   0.048422  -0.854 0.393340    
corr1              0.002089   0.047742   0.044 0.965105    
dem                0.127105   0.035679   3.562 0.000377 ***
supp_opp_parties  -0.055413   0.034429  -1.609 0.107679    
continue          -0.032596   0.022097  -1.475 0.140356    
protested          0.090071   0.022265   4.045 5.43e-05 ***
preboutef         -0.038257   0.049551  -0.772 0.440164    
post_exp          -0.011467   0.052701  -0.218 0.827774    
mon               -0.017228   0.006908  -2.494 0.012715 *  
as.factor(fgov)2   0.116790   0.089020   1.312 0.189697    
as.factor(fgov)3   0.058483   0.105184   0.556 0.578274    
as.factor(fgov)4   0.061048   0.083606   0.730 0.465366    
as.factor(fgov)5   0.130978   0.081296   1.611 0.107322    
as.factor(fgov)6   0.083368   0.093025   0.896 0.370268    
as.factor(fgov)7   0.006197   0.085602   0.072 0.942295    
as.factor(fgov)8   0.211462   0.110190   1.919 0.055127 .  
as.factor(fgov)9   0.062118   0.084053   0.739 0.459977    
as.factor(fgov)10  0.076911   0.103818   0.741 0.458894    
as.factor(fgov)11  0.163302   0.109689   1.489 0.136714    
as.factor(fgov)12  0.170914   0.084717   2.017 0.043788 *  
as.factor(fgov)13  0.012839   0.089126   0.144 0.885475    
as.factor(fgov)14  0.177984   0.096365   1.847 0.064908 .  
as.factor(fgov)15  0.134210   0.101431   1.323 0.185939    
as.factor(fgov)16  0.052723   0.073160   0.721 0.471215    
as.factor(fgov)17  0.106416   0.086357   1.232 0.218000    
as.factor(fgov)18  0.214414   0.093002   2.305 0.021249 *  
as.factor(fgov)19  0.114935   0.080674   1.425 0.154417    
as.factor(fgov)20  0.316394   0.109942   2.878 0.004049 ** 
as.factor(fgov)21  0.028812   0.096043   0.300 0.764216    
as.factor(fgov)22 -0.116207   0.103973  -1.118 0.263856    
as.factor(fgov)23 -0.024421   0.099326  -0.246 0.805814    
as.factor(fgov)24  0.113434   0.104063   1.090 0.275829    
as.factor(fgov)25 -0.021529   0.087183  -0.247 0.804983    
as.factor(fgov)26  0.193574   0.104879   1.846 0.065094 .  
as.factor(fgov)27  0.107213   0.114648   0.935 0.349831    
as.factor(fgov)28  0.098621   0.085004   1.160 0.246116    
as.factor(fgov)29  0.131832   0.111982   1.177 0.239237    
as.factor(fgov)30  0.095761   0.091298   1.049 0.294363    
as.factor(fgov)31  0.145817   0.088828   1.642 0.100847    
as.factor(fgov)32  0.107781   0.120921   0.891 0.372861    
as.factor(fgov)33  0.213301   0.187727   1.136 0.256003    
as.factor(fgov)34 -0.037991   0.100002  -0.380 0.704058    
as.factor(fgov)35  0.221270   0.111052   1.992 0.046461 *  
as.factor(fgov)36  0.200380   0.126085   1.589 0.112171    
as.factor(fgov)37  0.098960   0.223601   0.443 0.658126    
as.factor(fgov)38 -0.089886   0.157434  -0.571 0.568106    
as.factor(fgov)39  0.115744   0.101604   1.139 0.254776    
as.factor(fgov)40  0.148457   0.096826   1.533 0.125388    
as.factor(fgov)41  0.137003   0.113494   1.207 0.227532    
as.factor(fgov)42 -0.008749   0.126798  -0.069 0.944997    
as.factor(fgov)43  0.194892   0.095958   2.031 0.042394 *  
as.factor(fgov)44  0.120708   0.101907   1.184 0.236367    
as.factor(fgov)45  0.311231   0.187292   1.662 0.096731 .  
as.factor(fgov)46  0.094889   0.144907   0.655 0.512658    
as.factor(fgov)47  0.126136   0.100125   1.260 0.207901    
as.factor(fgov)48  0.103402   0.110296   0.937 0.348628    
as.factor(fgov)49 -0.322913   0.255706  -1.263 0.206807    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.4236 on 1886 degrees of freedom
  (266 observations deleted due to missingness)
Multiple R-squared:  0.1103,    Adjusted R-squared:  0.07159 
F-statistic: 2.851 on 82 and 1886 DF,  p-value: 2.936e-15</code></pre>
</div>
</div>
</section>
<section id="glm" class="level2">
<h2 class="anchored" data-anchor-id="glm"><code>glm()</code></h2>
<p><code>lm()</code> only estimates linear regressions. You can use <code>glm()</code> to estimate generalized linear models (such as logistic regressions). With <code>glm()</code>, we need to estimate an additional argument, which tells R what kind of generalized linear model we would like to estimate. If we want a binomial logistic regression the <code>family</code> argument should be set to <code>family = binomial(link = "logit")</code>. We can also use <code>glm()</code> to estimate linear regressions by setting <code>family = "gaussian"</code>. The following code should therefore produce exactly the same model as we estimated using <code>lm()</code> above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-121"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-121" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-121-1" class="code-annotation-target"><a href="#annotated-cell-121-1" aria-hidden="true" tabindex="-1"></a>grewal_model_1_glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(restraint <span class="sc">~</span></span>
<span id="annotated-cell-121-2"><a href="#annotated-cell-121-2" aria-hidden="true" tabindex="-1"></a>                       nonvio2 <span class="sc">+</span> prime_frat <span class="sc">+</span> prime_future <span class="sc">+</span> prime_RU <span class="sc">+</span> </span>
<span id="annotated-cell-121-3"><a href="#annotated-cell-121-3" aria-hidden="true" tabindex="-1"></a>                       prime_UN <span class="sc">+</span> oppose92coup2 <span class="sc">+</span> civwar <span class="sc">+</span> islamist <span class="sc">+</span> </span>
<span id="annotated-cell-121-4"><a href="#annotated-cell-121-4" aria-hidden="true" tabindex="-1"></a>                       supp_sharia <span class="sc">+</span> active <span class="sc">+</span> conscript <span class="sc">+</span> soldier <span class="sc">+</span> junoff <span class="sc">+</span> </span>
<span id="annotated-cell-121-5"><a href="#annotated-cell-121-5" aria-hidden="true" tabindex="-1"></a>                       senoff <span class="sc">+</span> branch2 <span class="sc">+</span> train_west <span class="sc">+</span> train_russia <span class="sc">+</span> </span>
<span id="annotated-cell-121-6"><a href="#annotated-cell-121-6" aria-hidden="true" tabindex="-1"></a>                       train_china <span class="sc">+</span> young <span class="sc">+</span> sex <span class="sc">+</span> edu <span class="sc">+</span> urban_area <span class="sc">+</span> </span>
<span id="annotated-cell-121-7"><a href="#annotated-cell-121-7" aria-hidden="true" tabindex="-1"></a>                       employed <span class="sc">+</span> student <span class="sc">+</span> arabic <span class="sc">+</span> econ1 <span class="sc">+</span> corr1 <span class="sc">+</span> </span>
<span id="annotated-cell-121-8"><a href="#annotated-cell-121-8" aria-hidden="true" tabindex="-1"></a>                       dem <span class="sc">+</span> supp_opp_parties <span class="sc">+</span> continue <span class="sc">+</span> protested <span class="sc">+</span> </span>
<span id="annotated-cell-121-9"><a href="#annotated-cell-121-9" aria-hidden="true" tabindex="-1"></a>                       preboutef <span class="sc">+</span> post_exp <span class="sc">+</span> mon <span class="sc">+</span></span>
<span id="annotated-cell-121-10"><a href="#annotated-cell-121-10" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">as.factor</span>(fgov), </span>
<span id="annotated-cell-121-11"><a href="#annotated-cell-121-11" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> grewal_data, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-121" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-121-12" class="code-annotation-target"><a href="#annotated-cell-121-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">family =</span> <span class="st">"gaussian"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-121" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-121" data-code-annotation="1">we use <code>glm()</code> instead of <code>lm()</code></span>
</dd>
<dt data-target-cell="annotated-cell-121" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="12" data-code-cell="annotated-cell-121" data-code-annotation="2">We remember to specify the <code>family</code> argument.</span>
</dd>
</dl>
</div>
</div>
<p>You can verify that this is the same model by comparing the coefficients to those we estimated above (they should be identical!):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(grewal_model_1_glm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = restraint ~ nonvio2 + prime_frat + prime_future + 
    prime_RU + prime_UN + oppose92coup2 + civwar + islamist + 
    supp_sharia + active + conscript + soldier + junoff + senoff + 
    branch2 + train_west + train_russia + train_china + young + 
    sex + edu + urban_area + employed + student + arabic + econ1 + 
    corr1 + dem + supp_opp_parties + continue + protested + preboutef + 
    post_exp + mon + as.factor(fgov), family = "gaussian", data = grewal_data)

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        0.340296   0.116016   2.933 0.003396 ** 
nonvio2            0.098405   0.027791   3.541 0.000408 ***
prime_frat        -0.023003   0.035303  -0.652 0.514747    
prime_future      -0.072684   0.035810  -2.030 0.042524 *  
prime_RU          -0.066233   0.036766  -1.801 0.071786 .  
prime_UN          -0.017195   0.035396  -0.486 0.627171    
oppose92coup2      0.041560   0.021020   1.977 0.048172 *  
civwar             0.014028   0.025565   0.549 0.583278    
islamist           0.019400   0.029871   0.649 0.516127    
supp_sharia        0.157501   0.036363   4.331 1.56e-05 ***
active            -0.002991   0.023729  -0.126 0.899714    
conscript         -0.015610   0.022980  -0.679 0.497058    
soldier            0.013436   0.024245   0.554 0.579536    
junoff             0.032761   0.030275   1.082 0.279338    
senoff             0.110452   0.061325   1.801 0.071847 .  
branch2Land        0.018626   0.027530   0.677 0.498754    
train_west        -0.095806   0.057540  -1.665 0.096076 .  
train_russia      -0.019452   0.033929  -0.573 0.566491    
train_china        0.035077   0.104884   0.334 0.738090    
young              0.132958   0.041903   3.173 0.001533 ** 
sex                0.020073   0.053541   0.375 0.707764    
edu               -0.013767   0.011900  -1.157 0.247464    
urban_area         0.006059   0.021512   0.282 0.778223    
employed           0.060536   0.024347   2.486 0.012991 *  
student           -0.017229   0.045347  -0.380 0.704032    
arabic             0.093961   0.028645   3.280 0.001056 ** 
econ1             -0.041342   0.048422  -0.854 0.393340    
corr1              0.002089   0.047742   0.044 0.965105    
dem                0.127105   0.035679   3.562 0.000377 ***
supp_opp_parties  -0.055413   0.034429  -1.609 0.107679    
continue          -0.032596   0.022097  -1.475 0.140356    
protested          0.090071   0.022265   4.045 5.43e-05 ***
preboutef         -0.038257   0.049551  -0.772 0.440164    
post_exp          -0.011467   0.052701  -0.218 0.827774    
mon               -0.017228   0.006908  -2.494 0.012715 *  
as.factor(fgov)2   0.116790   0.089020   1.312 0.189697    
as.factor(fgov)3   0.058483   0.105184   0.556 0.578274    
as.factor(fgov)4   0.061048   0.083606   0.730 0.465366    
as.factor(fgov)5   0.130978   0.081296   1.611 0.107322    
as.factor(fgov)6   0.083368   0.093025   0.896 0.370268    
as.factor(fgov)7   0.006197   0.085602   0.072 0.942295    
as.factor(fgov)8   0.211462   0.110190   1.919 0.055127 .  
as.factor(fgov)9   0.062118   0.084053   0.739 0.459977    
as.factor(fgov)10  0.076911   0.103818   0.741 0.458894    
as.factor(fgov)11  0.163302   0.109689   1.489 0.136714    
as.factor(fgov)12  0.170914   0.084717   2.017 0.043788 *  
as.factor(fgov)13  0.012839   0.089126   0.144 0.885475    
as.factor(fgov)14  0.177984   0.096365   1.847 0.064908 .  
as.factor(fgov)15  0.134210   0.101431   1.323 0.185939    
as.factor(fgov)16  0.052723   0.073160   0.721 0.471215    
as.factor(fgov)17  0.106416   0.086357   1.232 0.218000    
as.factor(fgov)18  0.214414   0.093002   2.305 0.021249 *  
as.factor(fgov)19  0.114935   0.080674   1.425 0.154417    
as.factor(fgov)20  0.316394   0.109942   2.878 0.004049 ** 
as.factor(fgov)21  0.028812   0.096043   0.300 0.764216    
as.factor(fgov)22 -0.116207   0.103973  -1.118 0.263856    
as.factor(fgov)23 -0.024421   0.099326  -0.246 0.805814    
as.factor(fgov)24  0.113434   0.104063   1.090 0.275829    
as.factor(fgov)25 -0.021529   0.087183  -0.247 0.804983    
as.factor(fgov)26  0.193574   0.104879   1.846 0.065094 .  
as.factor(fgov)27  0.107213   0.114648   0.935 0.349831    
as.factor(fgov)28  0.098621   0.085004   1.160 0.246116    
as.factor(fgov)29  0.131832   0.111982   1.177 0.239237    
as.factor(fgov)30  0.095761   0.091298   1.049 0.294363    
as.factor(fgov)31  0.145817   0.088828   1.642 0.100847    
as.factor(fgov)32  0.107781   0.120921   0.891 0.372861    
as.factor(fgov)33  0.213301   0.187727   1.136 0.256003    
as.factor(fgov)34 -0.037991   0.100002  -0.380 0.704058    
as.factor(fgov)35  0.221270   0.111052   1.992 0.046461 *  
as.factor(fgov)36  0.200380   0.126085   1.589 0.112171    
as.factor(fgov)37  0.098960   0.223601   0.443 0.658126    
as.factor(fgov)38 -0.089886   0.157434  -0.571 0.568106    
as.factor(fgov)39  0.115744   0.101604   1.139 0.254776    
as.factor(fgov)40  0.148457   0.096826   1.533 0.125388    
as.factor(fgov)41  0.137003   0.113494   1.207 0.227532    
as.factor(fgov)42 -0.008749   0.126798  -0.069 0.944997    
as.factor(fgov)43  0.194892   0.095958   2.031 0.042394 *  
as.factor(fgov)44  0.120708   0.101907   1.184 0.236367    
as.factor(fgov)45  0.311231   0.187292   1.662 0.096731 .  
as.factor(fgov)46  0.094889   0.144907   0.655 0.512658    
as.factor(fgov)47  0.126136   0.100125   1.260 0.207901    
as.factor(fgov)48  0.103402   0.110296   0.937 0.348628    
as.factor(fgov)49 -0.322913   0.255706  -1.263 0.206807    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for gaussian family taken to be 0.1794076)

    Null deviance: 380.30  on 1968  degrees of freedom
Residual deviance: 338.36  on 1886  degrees of freedom
  (266 observations deleted due to missingness)
AIC: 2288.1

Number of Fisher Scoring iterations: 2</code></pre>
</div>
</div>
</section>
<section id="stan_glm" class="level2">
<h2 class="anchored" data-anchor-id="stan_glm"><code>stan_glm()</code></h2>
<p>We can also estimate linear and generalized linear regressions using <code>stan_glm()</code> from the package <code>rstanarm</code>, which is how <span class="citation" data-cites="gelman2020regression">Gelman, Hill, and Vehtari (<a href="#ref-gelman2020regression" role="doc-biblioref">2020</a>)</span> introduce regression models in the text book for <a href="https://www.uio.no/studier/emner/sv/statsvitenskap/STV4022/index.html">STV4022</a>. The difference is that while <code>glm()</code> estimates the models using <a href="https://en.wikipedia.org/wiki/Maximum_likelihood_estimation">maximum likelihood</a>, <code>stan_glm()</code> uses <a href="https://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo">Bayesian methods</a>.</p>
<p>We can re-estimate the model using <code>stan_glm()</code> like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-123"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-123" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-123-1" class="code-annotation-target"><a href="#annotated-cell-123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstanarm)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-123" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-123-2" class="code-annotation-target"><a href="#annotated-cell-123-2" aria-hidden="true" tabindex="-1"></a>grewal_model_1_stan_glm <span class="ot">&lt;-</span> <span class="fu">stan_glm</span>(restraint <span class="sc">~</span></span>
<span id="annotated-cell-123-3"><a href="#annotated-cell-123-3" aria-hidden="true" tabindex="-1"></a>                       nonvio2 <span class="sc">+</span> prime_frat <span class="sc">+</span> prime_future <span class="sc">+</span> prime_RU <span class="sc">+</span> </span>
<span id="annotated-cell-123-4"><a href="#annotated-cell-123-4" aria-hidden="true" tabindex="-1"></a>                       prime_UN <span class="sc">+</span> oppose92coup2 <span class="sc">+</span> civwar <span class="sc">+</span> islamist <span class="sc">+</span> </span>
<span id="annotated-cell-123-5"><a href="#annotated-cell-123-5" aria-hidden="true" tabindex="-1"></a>                       supp_sharia <span class="sc">+</span> active <span class="sc">+</span> conscript <span class="sc">+</span> soldier <span class="sc">+</span> junoff <span class="sc">+</span> </span>
<span id="annotated-cell-123-6"><a href="#annotated-cell-123-6" aria-hidden="true" tabindex="-1"></a>                       senoff <span class="sc">+</span> branch2 <span class="sc">+</span> train_west <span class="sc">+</span> train_russia <span class="sc">+</span> </span>
<span id="annotated-cell-123-7"><a href="#annotated-cell-123-7" aria-hidden="true" tabindex="-1"></a>                       train_china <span class="sc">+</span> young <span class="sc">+</span> sex <span class="sc">+</span> edu <span class="sc">+</span> urban_area <span class="sc">+</span> </span>
<span id="annotated-cell-123-8"><a href="#annotated-cell-123-8" aria-hidden="true" tabindex="-1"></a>                       employed <span class="sc">+</span> student <span class="sc">+</span> arabic <span class="sc">+</span> econ1 <span class="sc">+</span> corr1 <span class="sc">+</span> </span>
<span id="annotated-cell-123-9"><a href="#annotated-cell-123-9" aria-hidden="true" tabindex="-1"></a>                       dem <span class="sc">+</span> supp_opp_parties <span class="sc">+</span> continue <span class="sc">+</span> protested <span class="sc">+</span> </span>
<span id="annotated-cell-123-10"><a href="#annotated-cell-123-10" aria-hidden="true" tabindex="-1"></a>                       preboutef <span class="sc">+</span> post_exp <span class="sc">+</span> mon <span class="sc">+</span></span>
<span id="annotated-cell-123-11"><a href="#annotated-cell-123-11" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">as.factor</span>(fgov), </span>
<span id="annotated-cell-123-12"><a href="#annotated-cell-123-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> grewal_data, </span>
<span id="annotated-cell-123-13"><a href="#annotated-cell-123-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">family =</span> <span class="st">"gaussian"</span>) </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-123" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-123" data-code-annotation="1">We must remember to load the <code>rstanarm</code> package.</span>
</dd>
<dt data-target-cell="annotated-cell-123" data-target-annotation="2">2</dt>
<dd>
<span data-code-lines="2" data-code-cell="annotated-cell-123" data-code-annotation="2">We use <code>stan_glm()</code> instead of <code>lm()</code> or <code>glm()</code></span>
</dd>
</dl>
</div>
</div>
<p>We can use <code>print()</code> to print out a summary of the model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grewal_model_1_stan_glm, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>stan_glm
 family:       gaussian [identity]
 formula:      restraint ~ nonvio2 + prime_frat + prime_future + prime_RU + 
       prime_UN + oppose92coup2 + civwar + islamist + supp_sharia + 
       active + conscript + soldier + junoff + senoff + branch2 + 
       train_west + train_russia + train_china + young + sex + edu + 
       urban_area + employed + student + arabic + econ1 + corr1 + 
       dem + supp_opp_parties + continue + protested + preboutef + 
       post_exp + mon + as.factor(fgov)
 observations: 1969
 predictors:   83
------
                  Median MAD_SD
(Intercept)        0.344  0.115
nonvio2            0.098  0.028
prime_frat        -0.024  0.036
prime_future      -0.074  0.037
prime_RU          -0.067  0.037
prime_UN          -0.017  0.036
oppose92coup2      0.042  0.021
civwar             0.015  0.026
islamist           0.019  0.029
supp_sharia        0.158  0.036
active            -0.003  0.023
conscript         -0.015  0.023
soldier            0.012  0.023
junoff             0.033  0.030
senoff             0.113  0.061
branch2Land        0.019  0.027
train_west        -0.095  0.059
train_russia      -0.020  0.034
train_china        0.033  0.100
young              0.134  0.041
sex                0.021  0.055
edu               -0.014  0.012
urban_area         0.006  0.021
employed           0.061  0.024
student           -0.018  0.045
arabic             0.094  0.028
econ1             -0.040  0.050
corr1              0.002  0.048
dem                0.126  0.037
supp_opp_parties  -0.055  0.035
continue          -0.033  0.021
protested          0.089  0.022
preboutef         -0.037  0.049
post_exp          -0.011  0.054
mon               -0.017  0.007
as.factor(fgov)2   0.117  0.091
as.factor(fgov)3   0.061  0.107
as.factor(fgov)4   0.060  0.085
as.factor(fgov)5   0.133  0.085
as.factor(fgov)6   0.082  0.094
as.factor(fgov)7   0.007  0.088
as.factor(fgov)8   0.213  0.113
as.factor(fgov)9   0.062  0.086
as.factor(fgov)10  0.078  0.106
as.factor(fgov)11  0.165  0.109
as.factor(fgov)12  0.174  0.087
as.factor(fgov)13  0.014  0.089
as.factor(fgov)14  0.176  0.094
as.factor(fgov)15  0.133  0.106
as.factor(fgov)16  0.054  0.075
as.factor(fgov)17  0.107  0.089
as.factor(fgov)18  0.214  0.096
as.factor(fgov)19  0.117  0.081
as.factor(fgov)20  0.314  0.114
as.factor(fgov)21  0.029  0.098
as.factor(fgov)22 -0.115  0.109
as.factor(fgov)23 -0.023  0.102
as.factor(fgov)24  0.117  0.102
as.factor(fgov)25 -0.022  0.087
as.factor(fgov)26  0.195  0.111
as.factor(fgov)27  0.107  0.113
as.factor(fgov)28  0.100  0.084
as.factor(fgov)29  0.135  0.109
as.factor(fgov)30  0.095  0.091
as.factor(fgov)31  0.146  0.088
as.factor(fgov)32  0.111  0.124
as.factor(fgov)33  0.216  0.189
as.factor(fgov)34 -0.037  0.104
as.factor(fgov)35  0.222  0.110
as.factor(fgov)36  0.197  0.128
as.factor(fgov)37  0.101  0.214
as.factor(fgov)38 -0.090  0.160
as.factor(fgov)39  0.116  0.101
as.factor(fgov)40  0.148  0.099
as.factor(fgov)41  0.139  0.118
as.factor(fgov)42 -0.010  0.126
as.factor(fgov)43  0.194  0.098
as.factor(fgov)44  0.121  0.104
as.factor(fgov)45  0.314  0.193
as.factor(fgov)46  0.093  0.141
as.factor(fgov)47  0.127  0.101
as.factor(fgov)48  0.101  0.111
as.factor(fgov)49 -0.330  0.259

Auxiliary parameter(s):
      Median MAD_SD
sigma 0.424  0.007 

------
* For help interpreting the printed output see ?print.stanreg
* For info on the priors used see ?prior_summary.stanreg</code></pre>
</div>
</div>
<p>When comparing the coefficients from <code>grewal_model_1_stan_glm</code> and <code>grewal_model_1_glm</code>, we see some slight differences, but the differences are very small and completely inconsequential!</p>
</section>
</section>
<section id="references" class="level1">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-gelman2020regression" class="csl-entry" role="listitem">
Gelman, Andrew, Jennifer Hill, and Aki Vehtari. 2020. <em>Regression and Other Stories</em>. Cambridge University Press.
</div>
<div id="ref-grewal2023military" class="csl-entry" role="listitem">
Grewal, Sharan. 2023. <span>“Military Repression and Restraint in Algeria.”</span> <em>American Political Science Review</em>, 1–16.
</div>
<div id="ref-nyrup2020governs" class="csl-entry" role="listitem">
Nyrup, Jacob, and Stuart Bramwell. 2020. <span>“Who Governs? A New Global Dataset on Members of Cabinets.”</span> <em>American Political Science Review</em> 114 (4): 1366–74.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This is actually one more than <span class="citation" data-cites="nyrup2020governs">Nyrup and Bramwell (<a href="#ref-nyrup2020governs" role="doc-biblioref">2020</a>)</span> report, so, again, something we might want to investigate further: it turns out that if we instead look at the variable called <code>who_gov$country_isocode</code>, which is the numeric country code, there are only 177 countries (but one of them appears with two different names. Can you find out which?).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="../basics_refresh/Beyond_the_basics.html" class="pagination-link">
        <span class="nav-page-text">Beyond the basics: functions and iteration</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><img src="../pics/uio-logo-white.png" class="img-fluid" width="150"></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>